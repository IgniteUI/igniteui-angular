<ng-template #defaultPinnedIndicator>
    <igx-chip *ngIf="displayPinnedChip" class="igx-grid__td--pinned-chip" [disabled]="true"
        [displayDensity]="'compact'">{{ grid.resourceStrings.igx_grid_pinned_row_indicator }}</igx-chip>
</ng-template>
<ng-template #defaultCell>
    <div *ngIf="column.dataType !== 'boolean' || (column.dataType === 'boolean' && this.formatter)" igxTextHighlight
        class="igx-grid__td-text" style="pointer-events: none;" [cssClass]="highlightClass"
        [activeCssClass]="activeHighlightClass" [groupName]="gridID" [value]="
            formatter
                ? (value | columnFormatter:formatter:rowData:columnData)
                : column.dataType === 'number'
                ? (value | number:column.pipeArgs.digitsInfo:grid.locale)
                : (column.dataType === 'date' || column.dataType === 'time' || column.dataType === 'dateTime')
                ? (value | date:column.pipeArgs.format:column.pipeArgs.timezone:grid.locale)
                : column.dataType === 'currency'
                ? (value | currency:currencyCode:column.pipeArgs.display:column.pipeArgs.digitsInfo:grid.locale)
                : column.dataType === 'percent'
                ? (value | percent:column.pipeArgs.digitsInfo:grid.locale)
                : value
        " [row]="rowData" [column]="this.column.field" [containerClass]="'igx-grid__td-text'"
        [metadata]="searchMetadata">{{
        formatter
        ? (value | columnFormatter:formatter:rowData:columnData)
        : column.dataType === "number"
        ? (value | number:column.pipeArgs.digitsInfo:grid.locale)
        : (column.dataType === 'date' || column.dataType === 'time' || column.dataType === 'dateTime')
        ? (value | date:column.pipeArgs.format:column.pipeArgs.timezone:grid.locale)
        : column.dataType === 'currency'
        ? (value | currency:currencyCode:column.pipeArgs.display:column.pipeArgs.digitsInfo:grid.locale)
        : column.dataType === 'percent'
        ? (value | percent:column.pipeArgs.digitsInfo:grid.locale)
        : value
        }}</div>
    <igx-icon *ngIf="column.dataType === 'boolean' && !this.formatter"
        [ngClass]="{ 'igx-icon--success': value, 'igx-icon--error': !value }">{{ value ? "check" : "close" }}</igx-icon>
</ng-template>
<ng-template #addRowCell let-cell="cell">
    <div *ngIf="column.dataType !== 'boolean' || (column.dataType === 'boolean' && this.formatter)" igxTextHighlight
        class="igx-grid__td-text" style="pointer-events: none" [cssClass]="highlightClass"
        [activeCssClass]="activeHighlightClass" [groupName]="gridID" [value]="formatter ? (value | columnFormatter:formatter:rowData) : column.dataType === 'number' ?
        (value | number:column.pipeArgs.digitsInfo:grid.locale) : (column.dataType === 'date' || column.dataType === 'time' || column.dataType === 'dateTime') ?
        (value | date:column.pipeArgs.format:column.pipeArgs.timezone:grid.locale) : column.dataType === 'currency' ?
        (value | currency:currencyCode:column.pipeArgs.display:column.pipeArgs.digitsInfo:grid.locale) : column.dataType === 'percent' ?
        (value | percent:column.pipeArgs.digitsInfo:grid.locale) : value" [row]="rowData" [column]="this.column.field"
        [containerClass]="'igx-grid__td-text'" [metadata]="searchMetadata">{{
        !isEmptyAddRowCell ? value : (column.header || column.field)
        }}</div>
</ng-template>
<ng-template #inlineEditor let-cell="cell">
    <ng-container *ngIf="column.dataType === 'string'">
        <igx-input-group displayDensity="compact" [formGroup]="formGroup">
            <input igxInput [(ngModel)]="editValue" [igxFocus]="true" [formControlName]="column.field" />
        </igx-input-group>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'number'">
        <igx-input-group displayDensity="compact" [formGroup]="formGroup">
            <input igxInput [(ngModel)]="editValue" [igxFocus]="true" [step]="step" type="number"
                [formControlName]="column.field" />
        </igx-input-group>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'boolean'" [formGroup]="formGroup">
        <igx-checkbox [checked]="editValue" (change)="editValue = $event.checked" [igxFocus]="true"
            [disableRipple]="true" [formControlName]="column.field"></igx-checkbox>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'date'" [formGroup]="formGroup">
        <igx-date-picker [style.width.%]="100" [outlet]="grid.outlet" mode="dropdown" [locale]="grid.locale"
            [(value)]="editValue" [igxFocus]="true" [formControlName]="column.field">
        </igx-date-picker>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'time'" [formGroup]="formGroup">
        <igx-time-picker [style.width.%]="100" [outlet]="grid.outlet" mode="dropdown" [locale]="grid.locale"
            [inputFormat]="column.defaultTimeFormat" [(value)]="editValue" [igxFocus]="true"
            [formControlName]="column.field">
        </igx-time-picker>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'dateTime'">
        <igx-input-group [formGroup]="formGroup">
            <input type="text" [formControlName]="column.field" igxInput
                [igxDateTimeEditor]="column.defaultDateTimeFormat" [(ngModel)]="editValue" [igxFocus]="true" />
        </igx-input-group>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'currency'">
        <igx-input-group displayDensity="compact" [formGroup]="formGroup">
            <igx-prefix *ngIf="grid.currencyPositionLeft">{{ currencyCodeSymbol }}</igx-prefix>
            <input igxInput [(ngModel)]="editValue" [igxFocus]="true" [step]="step" type="number"
                [formControlName]="column.field" />
            <igx-suffix *ngIf="!grid.currencyPositionLeft">{{ currencyCodeSymbol }}</igx-suffix>
        </igx-input-group>
    </ng-container>
    <ng-container *ngIf="column.dataType === 'percent'">
        <igx-input-group displayDensity="compact" [formGroup]="formGroup">
            <input igxInput [(ngModel)]="editValue" [igxFocus]="true" [step]="step" type="number"
                [formControlName]="column.field" />
            <igx-suffix> {{ editValue | percent:column.pipeArgs.digitsInfo:grid.locale }} </igx-suffix>
        </igx-input-group>
    </ng-container>
</ng-template>
<ng-container *ngTemplateOutlet="pinnedIndicatorTemplate; context: context">
</ng-container>
<ng-container *ngTemplateOutlet="template; context: context"></ng-container>
<ng-container *ngIf="isInvalid">
    <igx-icon #errorIcon [igxTooltipTarget]="tooltipRef" 
    (mouseover)='errorShowing = true' (mouseout)='errorShowing = false'>error</igx-icon>
    <div [id]="describeBy"
    igxTooltip #error #tooltipRef="tooltip">
        <div [style.width]="'max-content'">
            <ng-container *ngTemplateOutlet="cellValidationErrorTemplate || defaultError; context: { cell: this }"></ng-container>
        </div>
    </div>
</ng-container>

<ng-template #defaultError>
    <div *ngIf="formGroup?.get(column?.field).errors?.['required']">
        Field is required.
    </div>
    <div *ngIf="formGroup?.get(column?.field).errors?.['minlength']">
        Field must be at least {{formGroup.get(column.field).errors.minlength.requiredLength}} characters long.
    </div>
    <div *ngIf="formGroup?.get(column?.field).errors?.['maxlength']">
        Field must be at most {{formGroup.get(column.field).errors.maxlength.requiredLength}} characters long.
    </div>
    <div *ngIf="formGroup?.get(column?.field).errors?.['min']">
        Field must be more than {{formGroup.get(column.field).errors.min.min}}.
    </div>
    <div *ngIf="formGroup?.get(column?.field).errors?.['max']">
        Field must be less than {{formGroup.get(column.field).errors.max.max}}.
    </div>
    <div *ngIf="formGroup?.get(column?.field).errors?.['email']">
        Field must contain a valid email address.
    </div>
    <div *ngIf="formGroup?.get(column?.field).errors?.['pattern']">
        Field must match pattern {{formGroup.get(column.field).errors.pattern.requiredPattern}}.
    </div>
</ng-template>