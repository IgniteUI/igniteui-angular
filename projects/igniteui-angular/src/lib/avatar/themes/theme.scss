@use 'sass:map';
@use 'igniteui-theming' as *;
@use 'igniteui-theming/sass/animations' as *;
@use '../../core/styles/components/avatar/avatar-theme' as *;
@use '../../core/styles/themes/schemas';

$material: avatar-theme(schemas.$light-material-schema);
$bootstrap: avatar-theme(schemas.$light-bootstrap-schema);
$fluent: avatar-theme(schemas.$light-fluent-schema);
$indigo: avatar-theme(schemas.$light-indigo-schema);

$theme: $material;

@layer material {
    @include css-vars($material);
}

@layer bootstrap {
    @include css-vars($bootstrap);
}

@layer fluent {
    @include css-vars($fluent);
}

@layer indigo {
    @include css-vars($indigo);
}

$variant: map.get($theme, '_meta', 'variant');
$bootstrap-theme: $variant == 'bootstrap';

$box-shadow: map.get((
    material: null,
    fluent: null,
    bootstrap: 0 0 0 rem(3px) var-get($theme, 'background'),
    indigo-design: null,
), $variant);

%igx-avatar-outline {
    position: absolute;
    content: '';
    width: 100%;
    height: 100%;
    border-radius: inherit;
    opacity: .5;
}

%igx-avatar-display {
    @include sizable();
    --component-size: var(--ig-size, #{var-get($theme, 'default-size')});

    position: relative;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    user-select: none;
    color: var-get($theme, 'color');
    background: var-get($theme, 'background');
    vertical-align: middle;
    outline-style: none;
    flex-shrink: 0;
    width: var-get($theme, 'size');
    height: var-get($theme, 'size');

    igx-icon {
        --component-size: 3;
    }

    &::after {
        box-shadow: none;
        @if $bootstrap-theme {
            @extend %igx-avatar-outline;
        }
        transition: box-shadow .15s $ease-in-out-quad;
    }

    &:focus::after {
        box-shadow: $box-shadow;
    }
}

%igx-avatar-image {
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
}

%igx-avatar--circle {
    border-radius: calc(#{var-get($theme, 'size')} / 2);
}

%igx-avatar--rounded {
    border-radius: var-get($theme, 'border-radius');
}

%igx-avatar--initials {
    text-transform: uppercase;
    font-size: calc(#{var-get($theme, 'size')} / 2);
    line-height: calc(#{var-get($theme, 'size')} / 2);
}
