@use 'sass:map';
@use '../../base' as *;
@use '../../themes/schemas' as *;

////
/// @group themes
/// @access public
/// @author <a href="https://github.com/simeonoff" target="_blank">Simeon Simeonoff</a>
/// @author <a href="https://github.com/desig9stein" target="_blank">Marin Popov</a>
////

/// @param {Map} $theme - The calendar theme used to style the component.
@mixin date-picker($theme) {
    @include css-vars($theme);

    $variant: map.get($theme, '_meta', 'variant');
    $bootstrap-theme: $variant == 'bootstrap';

    %date-picker {
        // move the shadow in the schemas
        box-shadow: elevation(24);
        border-radius: var-get($theme, 'calendar-border-radius');
        background: var-get($theme, 'content-background');
        overflow: hidden;

        %display {
            background: var-get($theme, 'content-background');
        }

        %header-display {
            background: var-get($theme, 'header-background');
            color: var-get($theme, 'header-foreground');
        }

        %picker-arrow {
            color: var-get($theme, 'month-nav-arrow-color');

            &:hover {
                color: var-get($theme, 'month-nav-arrow-hover-color');
            }
        }

        %picker-date {
            color: var-get($theme, 'picker-foreground');

            &:hover {
                color: var-get($theme, 'picker-hover-foreground');
            }

            &:focus {
                color: var-get($theme, 'picker-focus-foreground');
            }
        }

        %value {
            color: var-get($theme, 'content-foreground');
            min-width: 14.28%;

            @if $bootstrap-theme {
                &:hover,
                &:focus {
                    color: var-get($theme, 'date-selected-foreground');
                }
            }
        }

        %value--label {
            color: var-get($theme, 'weekday-color');

            &:hover,
            &:focus {
                color: var-get($theme, 'weekday-color');
            }
        }

        %value--weekend {
            color: var-get($theme, 'weekend-color');
        }

        %value--disabled {
            color: var-get($theme, 'date-disabled-foreground');
        }

        %value--year-current {
            color: var-get($theme, 'year-current-foreground');

            @if $bootstrap-theme {
                &:hover,
                &:focus {
                    color: var-get($theme, 'year-hover-foreground');
                }
            }
        }

        %value--year-hover {
            color: var-get($theme, 'year-hover-foreground');
        }

        %value--month-focus,
        %value--month-hover {
            color: var-get($theme, 'month-hover-foreground');
        }

        %value--month-current {
            color: var-get($theme, 'month-current-foreground');
        }

        %value--inactive {
            color: var-get($theme, 'inactive-color');

            &:hover {
                color: var-get($theme, 'inactive-color');
            }
        }

        %value--selected {
            color: var-get($theme, 'date-selected-foreground');
        }

        %value--current {
            color: var-get($theme, 'date-current-foreground');
        }
    }

    %date-picker--vertical {
        min-width: rem(368px); /* 168px for header + 200px for the content */
    }

    %date-picker--dropdown {
        display: flex;
        flex: 1 0 0;
        flex-direction: column;
        box-shadow: elevation(3);
    }

    %date-picker__buttons {
        display: flex;
        justify-content: flex-end;
        padding: rem(8px);
    }
}
