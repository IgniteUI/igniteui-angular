<div class="sample-wrapper">
    <page-header title="Grid" description="Displays data formatted as a table and provides a line of advanced features such as sorting and filtering, editing, column
        and row freezing, cell merging, paging, column moving and hiding."></page-header>
    <section class="sample-content">
        <article class="grid-sample">
            <h4 class="sample-title">Grid with autogenerated columns and local data</h4>
            <div class="cards-container">
                <igx-card>
                    <igx-card-header>
                        <h3 class="igx-card-header__title">Add new row</h3>
                        <h5 class="igx-card-header__subtitle">The row is added through the grid API</h5>
                    </igx-card-header>
                    <igx-card-content>
                        <div class="igx-form-group">
                            <input igxInput (keyup.enter)="addRow()" [(ngModel)]="newRecord">
                            <label igxLabel>New value</label>
                        </div>
                    </igx-card-content>
                    <igx-card-actions>
                        <div class="igx-card-actions__bgroup">
                            <button igxButton igxRipple (click)="addRow()">Add</button>
                        </div>
                    </igx-card-actions>
                </igx-card>

                <igx-card>
                    <igx-card-header>
                        <h3 class="igx-card-header__title">Edit selected cell</h3>
                        <h5 class="igx-card-header__subtitle">Bound through ngModel</h5>
                    </igx-card-header>
                    <igx-card-content>
                        <div class="igx-form-group">
                            <input igxInput [disabled]="selectedCell?.columnField === 'ID'" [ngModel]="selectedCell?.dataItem" (ngModelChange)="updateRecord($event)">
                            <label igxLabel>Edit value</label>
                        </div>
                    </igx-card-content>
                </igx-card>

                <igx-card>
                    <igx-card-header>
                        <h3 class="igx-card-header__title">Delete selected row</h3>
                        <h5 class="igx-card-header__subtitle">Revertable for the last deleted row</h5>
                    </igx-card-header>
                    <igx-card-actions>
                        <div class="igx-card-actions__bgroup">
                            <button igxButton igxRipple (click)="deleteRow($event)">Delete Row</button>
                        </div>
                    </igx-card-actions>
                </igx-card>
            </div>
            
            <div class="toggles-container">
                <div class="toggle-group" *ngFor="let col of grid1.columns">
                    <h4>{{ col.field }}</h4>
                    <div class="switch-group">
                        <span igxLabel>Filtering</span>
                        <igx-switch [(ngModel)]="col.filtering"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Sorting</span>
                        <igx-switch [(ngModel)]="col.sortable"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Editable</span>
                        <igx-switch [(ngModel)]="col.editable"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Hidden</span>
                        <igx-switch [(ngModel)]="col.hidden"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Movable</span>
                        <igx-switch [(ngModel)]="col.movable"></igx-switch>
                    </div>
                </div>
            </div>

            <igx-grid #grid1 [data]="localData" [height]="'305px'" [autoGenerate]="true" (onColumnInit)="initColumns($event)" (onSelection)="selectCell($event)">
            </igx-grid>

        </article>

        <article class="grid-sample">
            <h4 class="sample-title">Grid with templated column cells and local observable data source</h4>
            <div class="toggles-container">
                <div class="toggle-group" *ngFor="let col of grid2.columns">
                    <h4>{{ col.field }}</h4>
                    <div class="switch-group">
                        <span igxLabel>Filtering</span>
                        <igx-switch [(ngModel)]="col.filtering"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Sorting</span>
                        <igx-switch [(ngModel)]="col.sortable"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Editable</span>
                        <igx-switch [(ngModel)]="col.editable"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Hidden</span>
                        <igx-switch [(ngModel)]="col.hidden"></igx-switch>
                    </div>
                    <div class="switch-group">
                        <span igxLabel>Movable</span>
                        <igx-switch [(ngModel)]="col.movable"></igx-switch>
                    </div>
                </div>
            </div>

            <div class="paging-config">
                <div class="switch-group">
                    <span igxLabel>Enable Paging</span>
                    <igx-switch [checked]="grid2.paging" (change)="grid2.paging = $event.target.checked"></igx-switch>
                </div>
                <div class="igx-form-group">
                    <input min="1" type="number" igxInput [ngModel]="grid2.perPage" (ngModelChange)="onPerPage($event)">
                    <label igxLabel>Records shown</label>
                </div>
                <div class="igx-form-group">
                    <input min="0" type="number" igxInput [ngModel]="grid2.state?.paging?.index" (ngModelChange)="onPagination($event)">
                    <label igxLabel>Go to page</label>
                </div>
            </div>
            <igx-grid #grid2 [data]="data | async" [paging]="true" [perPage]="10" (onCellSelection)="onInlineEdit($event)">
                <igx-column [sortable]="true" [field]="'ProductID'" [header]="'ID'"></igx-column>
                <igx-column [sortable]="true" [field]="'ProductName'"></igx-column>
                <igx-column [sortable]="true" [field]="'UnitsInStock'" [header]="'In Stock'">
                    <!--
                    <ng-template igxCell let-col="column" let-ri="rowIndex" let-item="item">
                        <span *ngIf="!showInput(ri, col.field)">{{ item }}</span>
                        <input *ngIf="showInput(ri, col.field)" igxInput [value]="item" (blur)="editCell = null" (change)="grid2.updateCell(ri, col.field, $event.target.value); editCell = null">
                    </ng-template>
                -->
                </igx-column>
                <igx-column [field]="'Discontinued'">
                    <ng-template igxHeader let-column="column">
                        <p style="color: crimson"></p>
                    </ng-template>
                    <ng-template igxCell let-item="item" let-ri="rowIndex" let-column="column">
                        <igx-checkbox [checked]="item" (change)="grid2.updateCell(ri, $event.target.checked)"></igx-checkbox>
                    </ng-template>
                </igx-column>
            </igx-grid>
            
        </article>

        <article class="grid-sample">
            <h4 class="sample-title">Grid with templated cell remote data</h4>
            <igx-grid #grid3 [data]="remote | async" [paging]="true" [perPage]="10" (onPagingDone)="process($event)" (onSortingDone)="process($event)"
                (onBeforeProcess)="onProcess($event)" [primaryKey]="'ProductID'">
                <igx-column [sortable]="true" [field]="'ProductID'" [header]="'ID'"></igx-column>
                <igx-column [editable]="true" [field]="'ProductName'"></igx-column>
                <igx-column [sortable]="true" [field]="'UnitsInStock'" [header]="'In Stock'"></igx-column>
                <igx-column [field]="'Discontinued'" [sortable]="true">
                    <ng-template igxHeader let-column="column">
                        <p style="color: crimson"></p>
                    </ng-template>
                    <ng-template igxCell let-item="item" let-ri="rowIndex" let-column="column">
                        <igx-checkbox [checked]="item" (change)="grid3.updateCell(ri, column?.field, $event.target.checked)"></igx-checkbox>
                    </ng-template>
                </igx-column>
            </igx-grid>
            
        </article>
        
    </section>

    <igx-toast #toast></igx-toast>
    <div style="width: calc(100% - 242px); display: flex; position: fixed; bottom: 0; justify-content: center">
        <igx-snackbar #snax [autoHide]="true" displayTime="2500" style="width: 50%;" message="Row was deleted" actionText="Undo"
            (onAction)="restore()">
        </igx-snackbar>
    </div>

</div>
