@use 'sass:map';
@use 'sass:meta';
@use 'sass:math';
@use '../../base' as *;
@use '../../themes/schemas' as *;

////
/// @group themes
/// @access public
/// @author <a href="https://github.com/simeonoff" target="_blank">Simeon Simeonoff</a>
/// @author <a href="https://github.com/desig9stein" target="_blank">Marin Popov</a>
////

/// If only header background color is specified, that color will be
/// used as the leading color for all accented elements, such as:
/// - current date color
/// - selected date background
/// - picker elements hover colors
/// - year/month hover/selected colors
/// If only background colors are specified, text/icon colors
/// will be assigned automatically to a contrasting color.
/// @param {Map} $schema [$light-material-schema] - The schema used as basis for styling the component.
///
/// @param {Color} $content-foreground [null] - The foreground of the days, months and years views.
/// @param {Color} $content-background [null] - The background of the days, months and years views.
/// @param {Color} $border-size [null] - The border size of all calendar views.
///
/// @param {Color} $header-foreground [null] - The header foreground.
/// @param {Color} $header-background [null] - The header background.
//
/// @param {Color} $picker-foreground [null]- The foreground of the month and year pickers.
/// @param {Color} $picker-background [null] - The background of the month and year pickers.
/// @param {Color} $picker-hover-foreground [null]-  The :hover color of the month and year pickers.
///
/// @param {Color} $weekday-color [null] - The color for weekday labels.
/// @param {Color} $inactive-color [null] - The color for previous and next month dates (visible only if [hideOutsideDays] is set to false(default)).
/// @param {Color} $weekend-color [null] - The color for weekend days.
///
/// @param {Color} $week-number-foreground [null] - The foreground of the week number column.
/// @param {Color} $week-number-background [null] - The background of the week number column.
///
/// @param {Color} $year-hover-foreground [null] - The :hover foreground of the year inside the years view.
/// @param {Color} $year-hover-background [null] - The :focus foreground of the year inside the years view.
///
/// @param {Color} $year-current-foreground [null] - The foreground of the current year in years view.
/// @param {Color} $year-current-background [null] - The background of the current year in years view.
/// @param {Color} $year-current-hover-foreground [null] - The :hover foreground of the current year in years view.
/// @param {Color} $year-current-hover-background [null] - The :hover background of the current year in years view.
/// @param {Color} $year-current-focus-foreground [null] - The :focus foreground of the current year in years view.
/// @param {Color} $year-current-focus-background [null] - The :focus background of the current year in years view.
///
/// @param {Color} $year-selected-foreground [null] - The foreground of the selected year in years view.
/// @param {Color} $year-selected-background [null] - The background of the selected year in years view.
/// @param {Color} $year-selected-hover-foreground [null] - The :hover foreground of the selected year in years view.
/// @param {Color} $year-selected-hover-background [null] - The :hover background of the selected year in years view.
/// @param {Color} $year-selected-focus-foreground [null] - The :focus foreground of the selected year in years view.
/// @param {Color} $year-selected-focus-background [null] - The :focus background of the selected year in years view.
///
/// @param {Color} $year-selected-current-foreground [null] - The foreground for the current selected year years view.
/// @param {Color} $year-selected-current-background [null] - The background for the current selected year in years view.
/// @param {Color} $year-selected-current-hover-foreground [null] - The :hover foreground for the current selected year in years view.
/// @param {Color} $year-selected-current-hover-background [null] - The :hover background on hover for the current year in years view.
/// @param {Color} $year-selected-current-focus-foreground [null] - The :focus foreground for the current selected year in years view.
/// @param {Color} $year-selected-current-focus-background [null] - The :focus background on focus for the current year in years view.
///
/// @param {Color} $navigation-color [null] - The color of the icon button responsible for month navigation.
/// @param {Color} $navigation-hover-color [null] - The :hover color of the icon button responsible for month navigation.
/// @param {Color} $navigation-focus-color [null] - The :focus color of the icon button responsible for month navigation.
///
/// @param {Color} $month-hover-foreground [null] - The :hover foreground of the month inside the months view.
/// @param {Color} $month-hover-background [null] - The :hover background of the month inside the months view.
/// @param {Color} $month-focus-foreground [null] - The :focus foreground of the month inside the months view.
/// @param {Color} $month-focus-background [null] - The :focus background of the month inside the months view.
///
/// @param {Color} $month-current-foreground [null]- The foreground of the current month in month view.
/// @param {Color} $month-current-background [null]- The background of the current month in month view.
/// @param {Color} $month-current-hover-foreground [null]- The :hover foreground of the current month in month view.
/// @param {Color} $month-current-hover-background [null]- The :hover background of the current month in month view.
/// @param {Color} $month-current-focus-foreground [null]- The :focus foreground of the current month in month view.
/// @param {Color} $month-current-focus-background [null]- The :focus background of the current month in month view.
///
/// @param {Color} $month-selected-foreground [null]- The foreground color of the selected month in month view.
/// @param {Color} $month-selected-background [null]- The background color of the selected month in month view.
/// @param {Color} $month-selected-hover-foreground [null] - The :hover foreground color of the current selected in month view.
/// @param {Color} $month-selected-hover-background [null] - The :hover background color of the current selected in month view.
/// @param {Color} $month-selected-focus-foreground [null] - The :focus foreground color of the current selected in month view.
/// @param {Color} $month-selected-focus-background [null] - The :focus background color of the current selected in month view.
///
/// @param {Color} $month-selected-current-foreground [null]- The foreground color of the selected current month in month view.
/// @param {Color} $month-selected-current-background [null]- The background color of the selected current month in month view.
/// @param {Color} $month-selected-current-hover-foreground [null] - The :hover foreground color of the current selected month in month view.
/// @param {Color} $month-selected-current-hover-background [null] - The :hover background color of the current selected month in month view.
/// @param {Color} $month-selected-current-focus-foreground [null] - The :focus foreground color of the current selected month in month view.
/// @param {Color} $month-selected-current-focus-background [null] - The :focus background color of the current selected month in month view.
///
/// @param {Color} $current-outline-color [null] - The outline color of the current year/month in year/month views.
/// @param {Color} $current-hover-outline-color [null] - The :hover outline color of the current year/month in year/month views.
/// @param {Color} $current-focus-outline-color [null] - The :focus outline color of the current year/month in year/month views.
///
/// @param {Color} $selected-outline-color [null] - The outline color of the selected year/month in year/month views.
/// @param {Color} $selected-hover-outline-color [null] - The :hover outline color of the selected year/month in year/month views.
/// @param {Color} $selected-focus-outline-color [null] - The :focus outline color of the selected year/month in year/month views.
///
/// @param {Color} $selected-current-outline-color [null] - The outline color of the selected current year/month in year/month views.
/// @param {Color} $selected-current-hover-outline-color [null] - The :hover outline color of the selected current year/month in year/month views.
/// @param {Color} $selected-current-focus-outline-color [null] - The :focus outline color of the selected current year/month in year/month views.
///
/// @param {Color} $date-hover-foreground [null] - The :hover foreground in idle state of a date.
/// @param {Color} $date-hover-background [null] - The :hover background in idle state of a date.
/// @param {Color} $date-focus-foreground [null] - The :focus foreground in idle state of a date.
/// @param {Color} $date-focus-background [null] - The :focus background in idle state of a date.
///
/// @param {Color} $date-selected-foreground [null] - The text color for the selected date.
/// @param {Color} $date-selected-background [null] - The background color for the selected date.
/// @param {Color} $date-selected-hover-background [null] - The hover background color for the selected date.
/// @param {Color} $date-selected-focus-background [null] - The focus background color for the selected date.
/// @param {Color} $date-selected-hover-foreground [null] - The hover text color for the selected date.
/// @param {Color} $date-selected-focus-foreground [null] - The focus text color for the selected date.
/// @param {Color} $date-selected-current-background [null] - The background color for the selected/current date.
/// @param {Color} $date-selected-current-hover-background [null] - The hover background color for the selected/current date.
/// @param {Color} $date-selected-current-focus-background [null] - The focus background color for the selected/current date.
/// @param {Color} $date-selected-current-foreground [null] - The text color for the selected/current date.
/// @param {Color} $date-selected-current-hover-foreground [null] - The hover text color for the selected/current date.
/// @param {Color} $date-selected-current-focus-foreground [null] - The focus text color for the selected/current date.
///
/// @param {Color} $date-selected-range-foreground [null] - The foreground of the dates in the selected range.
/// @param {Color} $date-selected-range-background [null] - The background of the dates in the selected range.
/// @param {Color} $date-selected-range-hover-foreground [null] - The :hover foreground of the dates in the selected range.
/// @param {Color} $date-selected-range-hover-background [null] - The :hover background of the dates in the selected range.
/// @param {Color} $date-selected-range-focus-foreground [null] - The :focus foreground of the dates in the selected range.
/// @param {Color} $date-selected-range-focus-background [null] - The :focus background of the dates in the selected range.
///
/// @param {Color} $date-selected-current-range-foreground [null] - The foreground of the current date in the selected range.
/// @param {Color} $date-selected-current-range-background [null] - The background of the current date in the selected range.
/// @param {Color} $date-selected-current-range-hover-foreground [null] - The :hover foreground of the current date in the selected range.
/// @param {Color} $date-selected-current-range-hover-background [null] - The :hover background of the current date in the selected range.
/// @param {Color} $date-selected-current-range-focus-foreground [null] - The :focus foreground of the current date in the selected range.
/// @param {Color} $date-selected-current-range-focus-background [null] - The :focus background of the current date in the selected range.
///
/// @param {Color} $date-selected-range-start-foreground [null] - The foreground of the first date in the selected range.
/// @param {Color} $date-selected-range-start-background [null] - The background of the first date in the selected range.
/// @param {Color} $date-selected-range-start-hover-foreground [null] - The :hover foreground of the first date in the selected range.
/// @param {Color} $date-selected-range-start-hover-background [null] - The :hover background of the first date in the selected range.
/// @param {Color} $date-selected-range-start-focus-foreground [null] - The :focus foreground of the first date in the selected range.
/// @param {Color} $date-selected-range-start-focus-background [null] - The :focus background of the first date in the selected range.

/// @param {Color} $date-selected-range-end-foreground [null] - The background of the last date in the selected range.
/// @param {Color} $date-selected-range-end-background [null] - The background of the last date in the selected range.
/// @param {Color} $date-selected-range-end-hover-foreground [null] - The :hover foreground of the last date in the selected range.
/// @param {Color} $date-selected-range-end-hover-background [null] - The :hover background of the last date in the selected range.
/// @param {Color} $date-selected-range-end-focus-foreground [null] - The :focus foreground of the last date in the selected range.
/// @param {Color} $date-selected-range-end-focus-background [null] - The :focus background of the last date in the selected range.
///
/// @param {Color} $date-current-outline [null] - The outline of the current date.
/// @param {Color} $date-current-hover-outline [null] - The :hover outline of the current date.
/// @param {Color} $date-current-focus-outline [null] - The :focus outline of the current date.
/// @param {Color} $date-selected-current-outline [null] - The outline of the current selected date.
/// @param {Color} $date-selected-current-hover-outline [null] - The :hover outline of the current selected date.
/// @param {Color} $date-selected-current-focus-outline [null] - The :focus outline of the current selected date.
///
/// @param {Color} $date-current-foreground [null] - The foreground of the current date.
/// @param {Color} $date-current-background [null] - The background color of the current date.
/// @param {Color} $date-current-hover-foreground [null] - The :hover text color of the current date.
/// @param {Color} $date-current-hover-background [null] - The :hover background color of the current date.
/// @param {Color} $date-current-focus-foreground [null] - The :focus text color of the current date.
/// @param {Color} $date-current-focus-background [null] - The :focus background color of the current date.
///
/// @param {Color} $date-special-background [null] - The background of the dates marked as special.
/// @param {Color} $date-special-foreground [null] - The foreground of the dates marked as special.
/// @param {Color} $date-special-outline [null] - The outline of the dates marked as special.
/// @param {Color} $date-special-current-outline [null] - The outline color of a special current date.
/// @param {Color} $calendar-border-color [null] - The calendar border color.
///
/// @param {Color} $date-border-color [null] - The border color of the date.
/// @param {Color} $date-hover-border-color [null] - The :hover border color of the date.
/// @param {Color} $date-focus-border-color [null] - The :focus border color of the date.
///
/// @param {Color} $date-selected-border-color [null] - The border color of the selected date.
/// @param {Color} $date-selected-hover-border-color [null] - The :hover border color of the selected date.
/// @param {Color} $date-selected-focus-border-color [null] - The :focus border color of the selected date.
/// @param {Color} $date-current-border-color [null] - The border color of the current date.
/// @param {Color} $date-current-hover-border-color [null] - The :hover border color of the current date.
/// @param {Color} $date-current-focus-border-color [null] - The :focus border color of the current date.
/// @param {Color} $date-selected-current-border-color [null] - The border color of the selected current date.
/// @param {Color} $date-selected-current-hover-border-color [null] - The :hover border color of the selected current date.
/// @param {Color} $date-selected-current-focus-border-color [null] - The :focus border color of the selected current date.
///
/// @param {Color} $date-range-border-color [null] - The border color of range selection.
/// @param {Color} $date-range-preview-border-color [null] - The border color of the range selection in preview state(visible before selecting the end of the range).
///
/// @param {Number} $size [null] - The size of the days, months, and years views.
/// @param {List} $calendar-border-radius [null] - The border radius used for the calendar.
/// @param {List} $date-border-radius [null] - The border radius used for the date.
/// @param {List} $date-range-border-radius [null] - The border radius used for the date range selection.
/// @param {List} $month-year-border-radius [null] - The border radius used for the month/year in month/year view.
///
/// @requires $light-material-schema
///
/// @example scss Change the header and content background colors
///   $my-calendar-theme: calendar-theme(
///     $header-background: purple,
///     $content-background: black
///   );
///   // Pass the theme to the css-vars() mixin
///   @include css-vars($my-calendar-theme);
@function calendar-theme(
    $schema: $light-material-schema,

    $content-background: null,
    $content-foreground: null,
    $calendar-border-color: null,

    $header-background: null,
    $header-foreground: null,

    $picker-foreground: null,
    $picker-background: null,
    $picker-hover-foreground: null,
    $picker-focus-foreground: null,

    $weekday-color: null,
    $weekend-color: null,
    $inactive-color: null,

    $week-number-foreground: null,
    $week-number-background: null,

    $year-hover-foreground: null,
    $year-hover-background: null,
    $year-focus-foreground: null,
    $year-focus-background: null,

    $year-current-foreground: null,
    $year-current-background: null,
    $year-current-hover-foreground: null,
    $year-current-hover-background: null,
    $year-current-focus-foreground: null,
    $year-current-focus-background: null,

    $year-selected-foreground: null,
    $year-selected-background: null,
    $year-selected-hover-foreground: null,
    $year-selected-hover-background: null,
    $year-selected-focus-foreground: null,
    $year-selected-focus-background: null,

    $year-selected-current-foreground: null,
    $year-selected-current-background: null,
    $year-selected-current-hover-foreground: null,
    $year-selected-current-hover-background: null,
    $year-selected-current-focus-foreground: null,
    $year-selected-current-focus-background: null,

    $navigation-color: null,
    $navigation-hover-color: null,
    $navigation-focus-color: null,

    $month-hover-foreground: null,
    $month-hover-background: null,
    $month-focus-foreground: null,
    $month-focus-background: null,

    $month-current-foreground: null,
    $month-current-background: null,
    $month-current-hover-foreground: null,
    $month-current-hover-background: null,
    $month-current-focus-foreground: null,
    $month-current-focus-background: null,

    $month-selected-current-foreground: null,
    $month-selected-current-background: null,
    $month-selected-current-hover-foreground: null,
    $month-selected-current-hover-background: null,
    $month-selected-current-focus-foreground: null,
    $month-selected-current-focus-background: null,

    $month-selected-foreground: null,
    $month-selected-background: null,
    $month-selected-hover-foreground: null,
    $month-selected-hover-background: null,
    $month-selected-focus-foreground: null,
    $month-selected-focus-background: null,

    $current-outline-color: null,
    $current-outline-hover-color: null,
    $current-outline-focus-color: null,

    $selected-outline-color: null,
    $selected-hover-outline-color: null,
    $selected-focus-outline-color: null,

    $selected-current-outline-color: null,
    $selected-current-outline-hover-color: null,
    $selected-current-outline-focus-color: null,

    $date-hover-background: null,
    $date-focus-background: null,
    $date-hover-foreground: null,
    $date-focus-foreground: null,

    $date-border-color: null,
    $date-hover-border-color: null,
    $date-focus-border-color: null,

    $date-selected-foreground: null,
    $date-selected-background: null,
    $date-selected-hover-background: null,
    $date-selected-focus-background: null,
    $date-selected-hover-foreground: null,
    $date-selected-focus-foreground: null,

    $date-selected-range-foreground: null,
    $date-selected-range-background: null,
    $date-selected-range-hover-foreground: null,
    $date-selected-range-hover-background: null,
    $date-selected-range-focus-foreground: null,
    $date-selected-range-focus-background: null,

    $date-selected-range-start-foreground: null,
    $date-selected-range-start-background: null,
    $date-selected-range-start-hover-foreground: null,
    $date-selected-range-start-hover-background: null,
    $date-selected-range-start-focus-foreground: null,
    $date-selected-range-start-focus-background: null,

    $date-selected-range-end-foreground: null,
    $date-selected-range-end-background: null,
    $date-selected-range-end-hover-foreground: null,
    $date-selected-range-end-hover-background: null,
    $date-selected-range-end-focus-foreground: null,
    $date-selected-range-end-focus-background: null,

    $date-selected-current-foreground: null,
    $date-selected-current-background: null,
    $date-selected-current-hover-foreground: null,
    $date-selected-current-hover-background: null,
    $date-selected-current-focus-foreground: null,
    $date-selected-current-focus-background: null,

    $date-selected-current-range-foreground: null,
    $date-selected-current-range-background: null,
    $date-selected-current-range-hover-foreground: null,
    $date-selected-current-range-hover-background: null,
    $date-selected-current-range-focus-foreground: null,
    $date-selected-current-range-focus-background: null,

    $date-selected-border-color: null,
    $date-selected-hover-border-color: null,
    $date-selected-focus-border-color: null,

    $date-current-border-color: null,
    $date-current-hover-border-color: null,
    $date-current-focus-border-color: null,

    $date-selected-current-border-color: null,
    $date-selected-current-hover-border-color: null,
    $date-selected-current-focus-border-color: null,

    $date-current-outline: null,
    $date-current-hover-outline: null,
    $date-current-focus-outline: null,

    $date-selected-current-outline: null,
    $date-selected-current-hover-outline: null,
    $date-selected-current-focus-outline: null,

    $date-current-foreground: null,
    $date-current-background: null,
    $date-current-hover-foreground: null,
    $date-current-focus-foreground: null,
    $date-current-hover-background: null,
    $date-current-focus-background: null,

    $date-special-background: null,
    $date-special-foreground: null,
    $date-special-outline: null,
    $date-special-current-outline: null,

    $calendar-border-radius: null,
    $week-number-border-radius: null,
    $date-border-radius: null,
    $date-range-border-radius: null,

    $date-range-border-color: null,
    $date-range-preview-border-color: null,

    $month-year-border-radius: null,

    $size: null,
    $inner-size: null,
) {
    $name: 'igx-calendar';
    $selector: 'igx-calendar, igx-days-view, igx-months-view, igx-years-view, .igx-date-picker, .igx-month-picker';
    $calendar-schema: ();

    @if map.has-key($schema, 'calendar') {
        $calendar-schema: map.get($schema, 'calendar');
    } @else {
        $calendar-schema: $schema;
    }

    $theme: digest-schema($calendar-schema);
    $meta: map.get($theme, '_meta');
    $variant: map.get($schema, '_meta', 'theme');

    @if $variant == 'bootstrap' {
        @if not($picker-background) and $header-background {
            @if meta.type-of($header-background) == 'color' {
                $picker-background: $header-background;
            }
        }
    } @else {
        @if not($weekday-color) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $weekday-color: text-contrast($content-background);
            }
        }
    }

    @if not($header-foreground) and $header-background {
        @if meta.type-of($header-background) == 'color' {
            $header-foreground: text-contrast($header-background);
        }
    }

    @if $variant != 'fluent' and $variant != 'bootstrap' {
        @if not($date-current-background) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-current-background: $content-background;
            }
        }

        @if not($date-current-foreground) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-current-foreground: text-contrast($content-background);
            }
        }
    }

    //@if $variant == 'fluent' and $variant == 'bootstrap' {
    //    @if not($date-hover-border-color) and $content-background {
    //        @if meta.type-of($content-background) == 'color' {
    //            $date-hover-border-color: text-contrast($content-background);
    //        }
    //    }
    //
    //    @if not($date-focus-border-color) and $content-background {
    //        @if meta.type-of($content-background) == 'color' {
    //            $date-focus-border-color: text-contrast($content-background);
    //        }
    //    }
    //
    //    @if not($date-selected-border-color) and $content-background {
    //        @if meta.type-of($content-background) == 'color' {
    //            $date-selected-border-color: text-contrast($content-background);
    //        }
    //    }
    //
    //    @if not($date-current-border-color) and $content-background {
    //        @if meta.type-of($content-background) == 'color' {
    //            $date-current-border-color: text-contrast($content-background);
    //        }
    //    }
    //
    //    @if not($date-selected-hover-border-color) and $content-background {
    //        @if meta.type-of($content-background) == 'color' {
    //            $date-selected-hover-border-color: text-contrast($content-background);
    //        }
    //    }
    //
    //    @if not($date-selected-focus-border-color) and $content-background {
    //        @if meta.type-of($content-background) == 'color' {
    //            $date-selected-focus-border-color: text-contrast($content-background);
    //        }
    //    }
    //}

    @if $variant == 'material' or $variant == 'indigo-design' {
        @if not($date-current-hover-outline) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-current-hover-outline: $content-background;
            }
        }

        @if not($date-current-focus-outline) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-current-focus-outline: $content-background;
            }
        }

        @if not($date-selected-current-outline) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-selected-current-outline: $content-background;
            }
        }

        @if not($date-selected-current-hover-outline) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-selected-current-hover-outline: $content-background;
            }
        }

        @if not($date-selected-current-focus-outline) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $date-selected-current-focus-outline: $content-background;
            }
        }
    }

    @if not($content-foreground) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $content-foreground: text-contrast($content-background);
        }
    }

    @if not($picker-background) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $picker-background: $content-background;
        }
    }

    @if not($weekend-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $weekend-color: rgba($content-foreground, .5);
        }
    }

    @if not($inactive-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $inactive-color: rgba($content-foreground, .7);
        }
    }

    @if $variant != 'bootstrap' {
        @if not($navigation-color) and $content-background {
            @if meta.type-of($content-background) == 'color' {
                $navigation-color: text-contrast($content-background);
            }
        }

        @if not($navigation-focus-color) and $navigation-hover-color {
            @if meta.type-of($navigation-hover-color) == 'color' {
                $navigation-focus-color: $navigation-hover-color;
            }
        }
    }

    @if not($picker-foreground) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $picker-foreground: text-contrast($content-background);
        }
    }

    @if not($date-selected-foreground) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-foreground: text-contrast($date-selected-background);
        }
    }

    @if not($date-selected-hover-foreground) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-hover-foreground: text-contrast($date-selected-background);
        }
    }

    @if not($date-selected-focus-foreground) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-focus-foreground: text-contrast($date-selected-background);
        }
    }

    @if not($date-selected-hover-foreground) and $date-selected-hover-background {
        @if meta.type-of($date-selected-hover-background) == 'color' {
            $date-selected-hover-foreground: text-contrast($date-selected-hover-background);
        }
    }

    @if not($date-selected-focus-foreground) and $date-selected-focus-background {
        @if meta.type-of($date-selected-focus-background) == 'color' {
            $date-selected-focus-foreground: text-contrast($date-selected-focus-background);
        }
    }

    @if not($date-selected-current-foreground) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-foreground: text-contrast($date-selected-background);
        }
    }

    @if not($date-selected-current-hover-foreground) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-hover-foreground: text-contrast($date-selected-background);
        }
    }

    @if not($date-selected-current-focus-foreground) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-focus-foreground: text-contrast($date-selected-background);
        }
    }

    @if not($date-selected-current-background) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-background: $date-selected-background;
        }
    }

    @if not($date-selected-current-hover-background) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-hover-background: $date-selected-background;
        }
    }

    @if not($date-selected-current-focus-background) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-focus-background: $date-selected-background;
        }
    }

    @if not($date-selected-current-focus-background) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-current-focus-background: $date-selected-background;
        }
    }

    @if not($date-selected-hover-background) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-hover-background: $date-selected-background;
        }
    }

    @if not($date-selected-focus-background) and $date-selected-background {
        @if meta.type-of($date-selected-background) == 'color' {
            $date-selected-focus-background: $date-selected-background;
        }
    }

    @if not($date-selected-current-hover-background) and $date-selected-hover-background {
        @if meta.type-of($date-selected-hover-background) == 'color' {
            $date-selected-current-hover-background: $date-selected-hover-background;
        }
    }

    @if not($date-selected-current-focus-background) and $date-selected-focus-background {
        @if meta.type-of($date-selected-focus-background) == 'color' {
            $date-selected-current-focus-background: $date-selected-focus-background;
        }
    }

    @if not($month-hover-foreground) and $month-hover-background {
        @if meta.type-of($month-hover-background) == 'color' {
            $month-hover-foreground: text-contrast($month-hover-background);
        }
    }

    @if not($month-current-hover-foreground) and $month-hover-background {
        @if meta.type-of($month-hover-background) == 'color' {
            $month-current-hover-foreground: text-contrast($month-hover-background);
        }
    }

    @if not($week-number-foreground) and $week-number-background {
        $week-number-foreground: text-contrast($week-number-background);
    }

    @return extend($theme, (
        name: $name,
        selector: $selector,

        content-background: $content-background,
        content-foreground: $content-foreground,
        calendar-border-color: $calendar-border-color,

        header-background: $header-background,
        header-foreground: $header-foreground,

        picker-foreground: $picker-foreground,
        picker-background: $picker-background,
        picker-hover-foreground: $picker-hover-foreground,
        picker-focus-foreground: $picker-focus-foreground,

        year-hover-foreground: $year-hover-foreground,
        year-focus-foreground: $year-focus-foreground,

        year-current-foreground: $year-current-foreground,
        year-current-background: $year-current-background,
        year-current-hover-foreground: $year-current-hover-foreground,
        year-current-hover-background: $year-current-hover-background,
        year-current-focus-foreground: $year-current-focus-foreground,
        year-current-focus-background: $year-current-focus-background,

        year-selected-foreground: $year-selected-foreground,
        year-selected-background: $year-selected-background,
        year-selected-hover-foreground: $year-selected-hover-foreground,
        year-selected-hover-background: $year-selected-hover-background,
        year-selected-focus-foreground: $year-selected-focus-foreground,
        year-selected-focus-background: $year-selected-focus-background,

        year-selected-current-foreground: $year-selected-current-foreground,
        year-selected-current-background: $year-selected-current-background,
        year-selected-current-hover-foreground: $year-selected-current-hover-foreground,
        year-selected-current-hover-background: $year-selected-current-hover-background,
        year-selected-current-focus-foreground: $year-selected-current-focus-foreground,
        year-selected-current-focus-background: $year-selected-current-focus-background,

        month-hover-foreground: $month-hover-foreground,
        month-focus-foreground: $month-focus-foreground,

        navigation-color: $navigation-color,
        navigation-hover-color: $navigation-hover-color,
        navigation-focus-color: $navigation-focus-color,

        month-current-background: $month-current-background,
        month-current-foreground: $month-current-foreground,
        month-current-hover-foreground: $month-current-hover-foreground,
        month-current-hover-background: $month-current-hover-background,
        month-current-focus-foreground: $month-current-focus-foreground,
        month-current-focus-background: $month-current-focus-background,

        month-selected-foreground: $month-selected-current-foreground,
        month-selected-background: $month-selected-current-background,
        month-selected-hover-foreground: $month-selected-current-hover-foreground,
        month-selected-hover-background: $month-selected-current-hover-background,
        month-selected-focus-foreground: $month-selected-current-focus-foreground,
        month-selected-focus-background: $month-selected-current-focus-background,

        month-selected-current-foreground: $month-selected-current-foreground,
        month-selected-current-background: $month-selected-current-background,
        month-selected-current-hover-foreground: $month-selected-current-hover-foreground,
        month-selected-current-hover-background: $month-selected-current-hover-background,
        month-selected-current-focus-foreground: $month-selected-current-focus-foreground,
        month-selected-current-focus-background: $month-selected-current-focus-background,

        current-outline-color: $current-outline-color,
        current-outline-hover-color: $current-outline-hover-color,
        current-outline-focus-color: $current-outline-focus-color,

        selected-outline-color: $selected-outline-color,
        selected-hover-outline-color: $selected-hover-outline-color,
        selected-focus-outline-color: $selected-focus-outline-color,

        selected-current-outline-color: $selected-current-outline-color,
        selected-current-outline-hover-color: $selected-current-outline-hover-color,
        selected-current-outline-focus-color: $selected-current-outline-focus-color,

        date-hover-background: $date-hover-background,
        date-focus-background: $date-focus-background,
        date-hover-foreground: $date-hover-foreground,
        date-focus-foreground: $date-focus-foreground,

        date-selected-background: $date-selected-background,
        date-selected-foreground: $date-selected-foreground,
        date-selected-hover-background: $date-selected-hover-background,
        date-selected-focus-background: $date-selected-focus-background,
        date-selected-hover-foreground: $date-selected-hover-foreground,
        date-selected-focus-foreground: $date-selected-focus-foreground,

        date-selected-range-foreground: $date-selected-range-foreground,
        date-selected-range-background: $date-selected-range-background,
        date-selected-range-hover-foreground: $date-selected-range-hover-foreground,
        date-selected-range-hover-background: $date-selected-range-hover-background,
        date-selected-range-focus-foreground: $date-selected-range-focus-foreground,
        date-selected-range-focus-background: $date-selected-range-focus-background,

        date-selected-range-start-foreground: $date-selected-range-start-foreground,
        date-selected-range-start-background: $date-selected-range-start-background,
        date-selected-range-start-hover-foreground: $date-selected-range-start-hover-foreground,
        date-selected-range-start-hover-background: $date-selected-range-start-hover-background,
        date-selected-range-start-focus-foreground: $date-selected-range-start-focus-foreground,
        date-selected-range-start-focus-background: $date-selected-range-start-focus-background,

        date-selected-range-end-foreground: $date-selected-range-end-foreground,
        date-selected-range-end-background: $date-selected-range-end-background,
        date-selected-range-end-hover-foreground: $date-selected-range-end-hover-foreground,
        date-selected-range-end-hover-background: $date-selected-range-end-hover-background,
        date-selected-range-end-focus-foreground: $date-selected-range-end-focus-foreground,
        date-selected-range-end-focus-background: $date-selected-range-end-focus-background,

        date-selected-current-range-foreground: $date-selected-current-range-foreground,
        date-selected-current-range-background: $date-selected-current-range-background,
        date-selected-current-range-hover-foreground: $date-selected-current-range-hover-foreground,
        date-selected-current-range-hover-background: $date-selected-current-range-hover-background,
        date-selected-current-range-focus-foreground: $date-selected-current-range-focus-foreground,
        date-selected-current-range-focus-background: $date-selected-current-range-focus-background,

        date-current-background: $date-current-background,
        date-current-foreground: $date-current-foreground,
        date-current-hover-background: $date-current-hover-background,
        date-current-focus-background: $date-current-focus-background,
        date-current-hover-foreground: $date-current-hover-foreground,
        date-current-focus-foreground: $date-current-focus-foreground,

        date-selected-current-background: $date-selected-current-background,
        date-selected-current-hover-background: $date-selected-current-hover-background,
        date-selected-current-focus-background: $date-selected-current-focus-background,
        date-selected-current-foreground: $date-selected-current-foreground,
        date-selected-current-hover-foreground: $date-selected-current-hover-foreground,
        date-selected-current-focus-foreground: $date-selected-current-focus-foreground,

        date-current-outline: $date-current-outline,
        date-current-hover-outline: $date-current-hover-outline,
        date-current-focus-outline: $date-current-focus-outline,

        date-selected-current-outline: $date-selected-current-outline,
        date-selected-current-hover-outline: $date-selected-current-hover-outline,
        date-selected-current-focus-outline: $date-selected-current-focus-outline,

        date-special-foreground: $date-special-foreground,
        date-special-background: $date-special-background,
        date-special-outline: $date-special-outline,

        week-number-foreground: $week-number-foreground,
        week-number-background: $week-number-background,

        weekend-color: $weekend-color,
        inactive-color: $inactive-color,
        weekday-color: $weekday-color,

        calendar-border-radius: $calendar-border-radius,
        date-border-radius: $date-border-radius,
        date-range-border-radius: $date-range-border-radius,
        month-year-border-radius: $month-year-border-radius,
        week-number-border-radius: $week-number-border-radius,
        date-border-color: $date-border-color,
        date-hover-border-color: $date-hover-border-color,
        date-focus-border-color: $date-focus-border-color,
        date-selected-border-color: $date-selected-border-color,
        date-selected-hover-border-color: $date-selected-hover-border-color,
        date-selected-focus-border-color: $date-selected-focus-border-color,
        date-current-border-color: $date-current-border-color,
        date-current-hover-border-color: $date-current-hover-border-color,
        date-current-focus-border-color: $date-current-focus-border-color,
        date-selected-current-border-color: $date-selected-current-border-color,
        date-selected-current-hover-border-color: $date-selected-current-hover-border-color,
        date-selected-current-focus-border-color: $date-selected-current-focus-border-color,
        date-range-preview-border-color: $date-range-preview-border-color,
        date-range-border-color: $date-range-border-color,
        size: $size,
        inner-size: $inner-size,
        _meta: map.merge(if($meta, $meta, ()), (
            variant: map.get($schema, '_meta', 'theme')
        )),
    ));
}

/// @deprecated Use the `css-vars` mixin instead.
/// @see {mixin} css-vars
/// @param {Map} $theme - The theme used to style the component.
@mixin calendar($theme) {
    @include css-vars($theme);

    $header-year-margin: 0;
    $cal-header-date-margin: 0;
    $cal-header-padding: rem(16px);

    $variant: map.get($theme, '_meta', 'variant');
    $bootstrap-theme: $variant == 'bootstrap';
    $not-bootstrap-theme: $variant != 'bootstrap';

    $cal-picker-padding: map.get((
        material: rem(16px),
        fluent: rem(16px),
        bootstrap: rem(8px),
        indigo-design: rem(16px),
    ), $variant);

    $date-size: map.get((
        material: var-get($theme, 'size'),
        fluent: var-get($theme, 'size'),
        bootstrap: var-get($theme, 'size'),
        indigo-design: var-get($theme, 'size'),
    ), $variant);

    $date-height: $date-size;

    $date-inner-size: map.get((
        material: var-get($theme, 'inner-size'),
        fluent: var-get($theme, 'inner-size'),
        bootstrap: var-get($theme, 'inner-size'),
        indigo-design: var-get($theme, 'inner-size'),
    ), $variant);

    $border-size: rem(1px);

    $border-width: map.get((
        material: 1px,
        fluent: 1px,
        bootstrap: 1px,
        indigo-design: 1px
    ), $variant);

    $cal-value-fw: 600;

    $cal-row-padding: rem(8px);
    $cal-row-margin: rem(2px) 0;

    %calendar {
        display: flex;
        flex-flow: column nowrap;
        width: 100%;
        min-width: rem(290px);
        color: var-get($theme, 'content-foreground');
        background: var-get($theme, 'content-background');
        border: $border-width solid var-get($theme, 'border-color');
        outline: none;
        overflow: hidden;
        border-radius: var-get($theme, 'border-radius');

        %days-view,
        %months-view,
        %years-view {
            border: none;
            border-radius: 0;
        }
    }

    %days-view,
    %months-view,
    %years-view {
        @include sizable();

        --component-size: var(--ig-size, #{var-get($theme, 'default-size')});
        --dropdown-size: var(--component-size);

        color: var-get($theme, 'content-foreground');
        background: var-get($theme, 'content-background');

        @if not $bootstrap-theme {
            padding-block-end: pad-block(rem(16px));
            padding-inline: pad-inline(rem(12px));
        }

        &:focus,
        &:focus-within,
        &:focus-visible {
            outline: none;
        }
    }

    @if $bootstrap-theme {
        %days-view {
            padding-block-end: pad-block(rem(4px));
        }

        %months-view,
        %years-view {
            padding-block: pad-block(rem(16px));
            padding-inline: pad-inline(rem(12px));
        }
    }

    .igx-date-picker {
        @if $bootstrap-theme {
            %calendar {
                border: 0;
                border-radius: 0;
            }

            margin-bottom: 0;

            %views-navigation {
                padding-bottom: 0;
            }

            %picker-arrow {
                top: $cal-picker-padding;
            }
        }
    }

    %month-picker {
        %views-navigation {
            @if $bootstrap-theme {
                border-bottom: rem(1px) solid var-get($theme, 'border-color');
            }
        }
    }

    %calendar-vertical {
        flex-flow: row nowrap;
    }

    %header-display {
        border-top-left-radius: inherit;
        border-top-right-radius: inherit;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        color: var-get($theme, 'header-foreground');
        background: var-get($theme, 'header-background');
        padding: $cal-header-padding;
    }

    %header-year {
        margin: $header-year-margin;
        color: currentColor;
    }

    %header-date {
        display: flex;
        margin: $cal-header-date-margin;

        > span {
            @include ellipsis();
        }
    }

    %calendar-wrapper {
        display: flex;
        width: 100%;
        flex-direction: column;
        outline-style: none;
    }

    %calendar-wrapper--vertical {
        display: grid;
        grid-template-rows: repeat(calc(var(--calendar-months) * 2), auto);
    }

    %header-date-vertical {
        flex-flow: column nowrap;
        min-width: rem(168px);
    }

    %pickers-display {
        display: flex;
        flex-grow: 1;
        grid-row: var(--calendar-row-start);

        &:focus-visible {
            outline: none;
        }

        > * {
            flex-grow: 1;
        }
    }

    %body-display {
        display: flex;
        flex-grow: 1;

        > * {
            flex-grow: 1;
        }
    }

    %pickers-display--days {
        display: grid;
        grid-template-columns: repeat(var(--calendar-months), 1fr);
    }

    %pickers-display--vertical,
    %body-display--vertical  {
        display: contents;
    }

    %views-navigation {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: rem(24px);
        position: relative;
        height: rem(50px);
        padding-inline: rem(16px);
        color: var-get($theme, 'picker-foreground');
        background: var-get($theme, 'picker-background');

        &:focus,
        &:focus-within {
            outline: none;
        }
    }

    %picker-dates {
        display: flex;
    }

    %days-view {
        display: flex;
        gap: rem(6px);
        grid-row: var(--calendar-row-start);


        @if $bootstrap-theme {
            %days-view-row {
                // This is the weekday labels row
                &:first-of-type {
                    background: var-get($theme, 'header-background');
                    border-block-end: rem(1px) solid var-get($theme, 'border-color');
                }
            }
        }
    }

    %picker__nav {
        display: flex;

        @if $variant != 'fluent' {
            gap: rem(24px);
        } @else {
            gap: rem(8px);
        }

        position: absolute;
        inset-inline-end: rem(16px);
    }

    %picker-arrow {
        display: flex;
        align-items: center;
        justify-content: center;
        color: var-get($theme, 'navigation-color');
        user-select: none;
        outline: none;
        cursor: pointer;

        @if $bootstrap-theme {
            top: math.div($cal-picker-padding, 2);
        }

        &:hover {
            color: var-get($theme, 'navigation-hover-color');
        }

        &:focus {
            color: var-get($theme, 'navigation-focus-color');
        }

        [dir='rtl'] & {
            transform: scaleX(-1);
        }

        igx-icon {
            --component-size: var(--ig-size, var(--ig-size-medium));
        }
    }

    %picker-date {
        color: var-get($theme, 'picker-foreground');
        text-align: center;
        outline: none;
        padding: 0 rem(2px);
        transition: color 150ms ease-in-out 0s;

        &:hover {
            color: var-get($theme, 'picker-hover-foreground');
            cursor: pointer;
        }

        &:focus {
            color: var-get($theme, 'picker-focus-foreground');
        }
    }

    %days-view-grid {
        flex: 1 1 auto;

        @if $bootstrap-theme {
            padding-bottom: 0;
        }
    }

    %date {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var-get($theme, 'content-foreground');
        outline: none;
        height: $date-height;
        border-block-start: rem(1px) solid transparent;
        border-block-end: rem(1px) solid transparent;
        width: 100%;
    }

    %weekday-label {
        @if $not-bootstrap-theme {
            height: $date-height;
        }

        color: var-get($theme, 'weekday-color');

        &:hover,
        &:focus {
            color: var-get($theme, 'weekday-color');
        }

        border-radius: 0;

        @if $bootstrap-theme {
            cursor: default;

            font-style: italic !important;
        }
    }

    %days-view-row {
        display: flex;
        justify-content: space-between;

        &:last-of-type {
            %date-inner-week-number {
                border-bottom-left-radius: var-get($theme, 'week-number-border-radius');
                border-bottom-right-radius: var-get($theme, 'week-number-border-radius');

                &::before {
                    display: none;
                }
            }

            @if $bootstrap-theme {
                margin-bottom: 0;
            }
        }
    }

    %date-special {
        %date-inner {
            color: var-get($theme, 'date-special-foreground');
            background: var-get($theme, 'date-special-background');

            &::after {
                content: '';
                position: absolute;
                z-index: 0;

                @if $variant == 'bootstrap' or $variant == 'fluent' {
                    width: $date-inner-size;
                    height: $date-inner-size;
                } @else {
                    width: $date-size;
                    height: $date-size;
                }

                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-special-outline');
                border-radius: 50%;
            }

            @if $variant == 'material' or $variant == 'indigo' {
                &:focus,
                &:hover {
                    color: var-get($theme, 'date-special-foreground');
                }
            }
        }
    }

    %date-inner {
        position: relative;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: $date-size;
        min-width: $date-size;
        height: $date-height;
        border-radius: var-get($theme, 'date-border-radius');
        border: rem(1px) solid var-get($theme, 'date-border-color');
        z-index: 2;
    }

    %date-inner-hover {
        @if $bootstrap-theme {
            color: var-get($theme, 'date-selected-foreground');
        }

        color: var-get($theme, 'date-hover-foreground');
        background: var-get($theme, 'date-hover-background');
        border: rem(1px) solid var-get($theme, 'date-hover-border-color');
        cursor: pointer;
    }

    %date-active {
        %date-inner {
            color: var-get($theme, 'date-focus-foreground');
            background: var-get($theme, 'date-focus-background');

            @if $variant != 'fluent' {
                border: rem(1px) solid var-get($theme, 'date-focus-border-color');
            }
        }
    }

    %date-weekend {
        color: var-get($theme, 'weekend-color');
    }

    %label-week-number,
    %date-inner-week-number {
        position: relative;
        border-radius: 0;
        pointer-events: none;
        z-index: 1;

        @if $bootstrap-theme {
            font-style: italic !important;
        }
    }

    %date-week-number {
        pointer-events: none;

        &:hover,
        &:focus,
        &:focus-visible,
        &:focus-within {
            %date-inner-week-number {
                cursor: default;
                color: var-get($theme, 'week-number-foreground');
            }
        }
    }
    %date-inner-week-number {
        position: relative;
        min-width: auto;
        width: $date-size;
        color: var-get($theme, 'week-number-foreground');
        background: var-get($theme, 'week-number-background');

        &::after {
            display: none;
        }

        &::before {
            content: '';
            position: absolute;
            background: var-get($theme, 'week-number-background');
            border-inline: rem(1px) solid var-get($theme, 'week-number-background');
            inset-inline-start: rem(-1px);
            inset-block-start: 100%;
            height: 100%;
            width: $date-size;
        }
    }

    %label-week-number {
        text-align: center;

        span {
            display: flex;
            justify-content: center;
            align-items: center;
            width: $date-size;
            height: $date-height;
            position: relative;
            color: var-get($theme, 'weekday-color');
            background: var-get($theme, 'week-number-background');
            border-top-left-radius: var-get($theme, 'week-number-border-radius');
            border-top-right-radius: var-get($theme, 'week-number-border-radius');
            border: rem(1px) solid transparent;


            @if not $bootstrap-theme {
                &::before {
                    content: '';
                    position: absolute;
                    background: var-get($theme, 'week-number-background');
                    border-inline: rem(1px) solid var-get($theme, 'week-number-background');
                    inset-inline-start: rem(-1px);
                    inset-block-start: 100%;
                    height: 100%;
                    width: $date-size;
                }
            }
        }
    }

    %years-grid,
    %months-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax($date-size, 1fr));
        row-gap: rem(4px);
        justify-items: center;
        width: 100%;
    }

    %years-view,
    %months-view {
        display: flex;
        justify-content: center;
        position: relative;
        z-index: 1;
    }

    %years-view__year-inner,
    %months-view__month-inner {
        display: flex;
        justify-content: center;
        align-items: center;
        height: $date-height;
        width: 100%;
        border-radius: var-get($theme, 'month-year-border-radius');
        padding: 0 rem(12px);
        outline: none;
        cursor: pointer;
    }

    %year-focus,
    %month-focus {
        outline: none;
    }

    // YEARS VIEW
    %years-view__year-inner-hover {
        color: var-get($theme, 'year-hover-foreground');
        background: var-get($theme, 'year-hover-background');
    }

    %year-focus {
        %years-view__year-inner {
            color: var-get($theme, 'year-focus-foreground');
            background: var-get($theme, 'year-focus-background');
        }
    }

    %years-view__year-current {
        %years-view__year-inner {
            color: var-get($theme, 'year-current-foreground');
            background: var-get($theme, 'year-current-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'current-outline-color');
        }
    }

    %years-view__year-current-hover {
        %years-view__year-inner {
            color: var-get($theme, 'year-current-hover-foreground');
            background: var-get($theme, 'year-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'current-outline-hover-color');
        }
    }

    %years-view__year-current-focus {
        %years-view__year-inner {
            color: var-get($theme, 'year-current-focus-foreground');
            background: var-get($theme, 'year-current-focus-background');

            @if $variant == 'fluent' or $variant == 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'current-outline-focus-color');
            } @else {
                box-shadow: inset 0 0 0 rem(1px) var(--content-background),
                    0 0 0 rem(1px) var-get($theme, 'current-outline-focus-color');
            }
        }
    }

    %years-view__year-selected {
        %years-view__year-inner {
            color: var-get($theme, 'year-selected-foreground');
            background: var-get($theme, 'year-selected-background');

            @if $variant != 'bootstrap' and $variant != 'fluent' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-outline-color');
            }
        }
    }

    %years-view__year-selected-hover {
        %years-view__year-inner {
            color: var-get($theme, 'year-selected-hover-foreground');
            background: var-get($theme, 'year-selected-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-hover-outline-color');
        }
    }

    %years-view__year-selected-focus {
        %years-view__year-inner {
            color: var-get($theme, 'year-selected-focus-foreground');
            background: var-get($theme, 'year-selected-focus-background');

            @if $variant == 'fluent' or $variant == 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-focus-outline-color');
            } @else {
                box-shadow: inset 0 0 0 rem(1px) var(--content-background),
                    0 0 0 rem(1px) var-get($theme, 'selected-focus-outline-color');
            }
        }
    }

    %years-view__year-selected-current {
        %years-view__year-inner {
            color: var-get($theme, 'year-selected-current-foreground');
            background: var-get($theme, 'year-selected-current-background');

            @if $variant != 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-current-outline-color');
            }
        }
    }

    %years-view__year-selected-current-hover {
        %years-view__year-inner {
            color: var-get($theme, 'year-selected-current-hover-foreground');
            background: var-get($theme, 'year-selected-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-current-outline-hover-color');
        }
    }

    %years-view__year-selected-current-focus {
        %years-view__year-inner {
            color: var-get($theme, 'year-selected-current-focus-foreground');
            background: var-get($theme, 'year-selected-current-focus-background');

            @if $variant == 'fluent' or $variant == 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-current-outline-focus-color');
            } @else {
                box-shadow: inset 0 0 0 rem(1px) var(--content-background),
                    0 0 0 rem(1px) var-get($theme, 'selected-current-outline-focus-color');
            }
        }
    }

    // MONTHS VIEW
    %months-view__month-inner-hover {
        color: var-get($theme, 'month-hover-foreground');
        background: var-get($theme, 'month-hover-background');
    }


    %months-view__month-inner-current-hover {
        color: var-get($theme, 'month-hover-foreground');
        background: var-get($theme, 'month-hover-background');
    }

    %month-focus {
        %months-view__month-inner {
            color: var-get($theme, 'month-focus-foreground');
            background: var-get($theme, 'month-focus-background');
        }
    }

    %months-view__month-current {
        %months-view__month-inner {
            color: var-get($theme, 'month-current-foreground');
            background: var-get($theme, 'month-current-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'current-outline-color');
        }
    }

    %months-view__month-current-hover {
        %months-view__month-inner {
            color: var-get($theme, 'month-current-hover-foreground');
            background: var-get($theme, 'month-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'current-outline-hover-color');
        }
    }

    %months-view__month-current-focus {
        %months-view__month-inner {
            color: var-get($theme, 'month-current-focus-foreground');
            background: var-get($theme, 'month-current-focus-background');

            @if $variant == 'fluent' or $variant == 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'current-outline-focus-color');
            } @else {
                box-shadow: inset 0 0 0 rem(1px) var(--content-background),
                    0 0 0 rem(1px) var-get($theme, 'current-outline-focus-color');
            }
        }
    }


    %months-view__month-selected {
        %months-view__month-inner {
            color: var-get($theme, 'month-selected-foreground');
            background: var-get($theme, 'month-selected-background');

            @if $not-bootstrap-theme and $variant != 'fluent' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-outline-color');
            }
        }
    }

    %months-view__month-selected-hover {
        %months-view__month-inner {
            color: var-get($theme, 'month-selected-hover-foreground');
            background: var-get($theme, 'month-selected-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-hover-outline-color');
        }
    }

    %months-view__month-selected-focus {
        %months-view__month-inner {
            color: var-get($theme, 'month-selected-focus-foreground');
            background: var-get($theme, 'month-selected-focus-background');

            @if $variant == 'fluent' or $variant == 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-focus-outline-color');
            } @else {
                box-shadow: inset 0 0 0 rem(1px) var(--content-background),
                    0 0 0 rem(1px) var-get($theme, 'selected-focus-outline-color');
            }
        }
    }

    %months-view__month-selected-current {
        %months-view__month-inner {
            color: var-get($theme, 'month-selected-current-foreground');
            background: var-get($theme, 'month-selected-current-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-current-outline-color');
        }
    }

    %months-view__month-selected-current-hover {
        %months-view__month-inner {
            color: var-get($theme, 'month-selected-current-hover-foreground');
            background: var-get($theme, 'month-selected-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-current-outline-hover-color');
        }
    }

    %months-view__month-selected-current-focus {
        %months-view__month-inner {
            color: var-get($theme, 'month-selected-current-focus-foreground');
            background: var-get($theme, 'month-selected-current-focus-background');

            @if $variant == 'fluent' or $variant == 'bootstrap' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'selected-current-outline-focus-color');
            } @else {
                box-shadow: inset 0 0 0 rem(1px) var(--content-background),
                    0 0 0 rem(1px) var-get($theme, 'selected-current-outline-focus-color');
            }
        }
    }

    // MONTHS END

    // DATE VIEW
    %date-inactive {
        cursor: default;

        %date-inner {
            color: var-get($theme, 'inactive-color');

            &:hover {
                color: var-get($theme, 'inactive-color');
            }
        }
    }

    %date-inactive-selected-range,
    %date-inactive-selected-single,
    %date-inactive-special {
        %date-inner {
            background: transparent;
            border-color: transparent;

            &:hover {
                background: var-get($theme, 'date-hover-background');
                border-color: transparent;
            }

            &::before,
            &::after {
                display: none;
            }
        }
    }

    %date-inactive-selected-single,
    %date-inactive-special {
        %date-inner {
            color: var-get($theme, 'inactive-color');

            &:hover {
                color: var-get($theme, 'inactive-color');
            }
        }
    }

    %date-single {
        background: transparent;

        &::before,
        &::after {
            background: transparent;
        }
    }

    %date-current {
        %date-inner {
            color: var-get($theme, 'date-current-foreground');
            border-color: var-get($theme, 'date-current-border-color');

            @if $variant != 'material' and $variant != 'indigo' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-current-outline');
            } @else {
                box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-current-outline');
            }

            @if $variant == 'fluent' {
                &::before {
                    content: '';
                    border-radius: 50%;
                    position: absolute;
                    width: $date-inner-size;
                    height: $date-inner-size;
                    background: var-get($theme, 'date-current-background');
                    z-index: -1;
                }
            } @else {
                background: var-get($theme, 'date-current-background');
            }

            &:hover {
                color: var-get($theme, 'date-current-hover-foreground');
                background: var-get($theme, 'date-current-hover-background');
                border-color: var-get($theme, 'date-current-hover-border-color');

                @if $variant != 'material' and $variant != 'indigo' {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-current-hover-outline');
                } @else {
                    box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-current-hover-outline');
                }
            }
        }
    }



    %date-current-range {
        %date-inner {
            color: var-get($theme, 'date-current-foreground');
        }
    }

    %date-current-active {
        %date-inner {
            color: var-get($theme, 'date-current-focus-foreground');
            background: var-get($theme, 'date-current-focus-background');
            border-color: var-get($theme, 'date-current-focus-border-color');

            @if $variant != 'material' and $variant != 'indigo' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-current-focus-outline');
            } @else {
                box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-current-focus-outline');
            }
        }
    }

    %date-special-active {
        %date-inner {
            color: var-get($theme, 'date-focus-foreground');
            background: var-get($theme, 'date-focus-background');
        }
    }

    %date-special-current {
        %date-inner {
            @if $variant == 'material' or $variant == 'indigo' {
                color: var-get($theme, 'date-special-foreground');
            } @else {
                color: var-get($theme, 'date-current-foreground');
            }

            &::after {
                @if $variant != 'fluent' {
                    width: $date-inner-size;
                    height: $date-inner-size;
                } @else {
                    width: $date-size;
                    height: $date-size;
                }
            }

            @if $variant == 'fluent' {
                &::after {
                    box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-special-current-outline');
                }
            }

            &:hover {
                @if $variant == 'material' or $variant == 'indigo' {
                    color: var-get($theme, 'date-special-foreground');
                } @else {
                    color: var-get($theme, 'date-current-hover-foreground');
                }
            }
        }
    }

    %date-special-selected {
        %date-inner {
            &::after {
                @if $variant == 'fluent' {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-special-outline');
                } @else {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-foreground');
                }
            }
        }
    }

    %date-special-selected-range {
        %date-inner {
            @if $variant == 'material' or $variant == 'fluent' {
                color: var-get($theme, 'date-special-foreground');
            }

            &::after {
                @if $variant == 'bootstrap' or $variant == 'fluent' {
                    width: $date-inner-size;
                    height: $date-inner-size;
                } @else {
                    width: $date-size;
                    height: $date-size;
                }

                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-special-outline');
            }
        }
    }

    %date-special-selected-range-first,
    %date-special-selected-range-last {
        %date-inner {
            &::after {
                width: $date-inner-size;
                height: $date-inner-size;

                @if $variant == 'fluent' {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-special-outline');
                } @else {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-foreground');
                }
            }
        }
    }

    %date-selected {
        position: relative;

        %date-inner {
            color: var-get($theme, 'date-selected-foreground');
            background: var-get($theme, 'date-selected-background');
            border-color: var-get($theme, 'date-selected-border-color');

            &:hover {
                color: var-get($theme, 'date-selected-hover-foreground');
                background: var-get($theme, 'date-selected-hover-background');
                border-color: var-get($theme, 'date-selected-hover-border-color');
            }

            &::after {
                width: $date-inner-size;
                height: $date-inner-size;
            }
        }

        &::before,
        &::after {
            height: $date-height;
        }
    }

    %date-selected-active {
        %date-inner {
            color: var-get($theme, 'date-selected-focus-foreground');
            background: var-get($theme, 'date-selected-focus-background');
            border-color: var-get($theme, 'date-selected-focus-border-color');
        }
    }


    %selected-current {
        %date-inner {
            color: var-get($theme, 'date-selected-current-foreground');
            background: var-get($theme, 'date-selected-current-background') ;
            border-color: var-get($theme, 'date-selected-current-border-color') !important;

            @if $variant != 'material' and $variant != 'indigo' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-outline'),
            } @else {
                box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-selected-current-outline'),
            }

            &:hover {
                color: var-get($theme, 'date-selected-current-hover-foreground');
                background: var-get($theme, 'date-selected-current-hover-background');
                border-color: var-get($theme, 'date-selected-current-hover-border-color');

                @if $variant != 'material' and $variant != 'indigo' {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-outline'),
                } @else {
                    box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-selected-current-outline'),
                }
            }
        }
    }

    %selected-current-active {
        %date-inner {
            color: var-get($theme, 'date-selected-current-focus-foreground');
            background: var-get($theme, 'date-selected-current-focus-background');
            border-color: var-get($theme, 'date-selected-current-focus-border-color');


            @if $variant != 'material' and $variant != 'indigo' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-outline');
            } @else {
                box-shadow: 0 0 0 rem(1px) var-get($theme, 'date-selected-current-outline');
            }
        }
    }

    %calendar__aria-off-screen {
        position: absolute !important;
        border: none !important;
        height: 1px !important;
        width: 1px !important;
        inset-inline-start: 0 !important;
        top: 0 !important;
        overflow: hidden !important;
        padding: 0 !important;
        margin: 0 !important;
        user-select: none;
        pointer-events: none;

        &:focus {
            outline: none;
        }
    }

    // RANGE
    %date-selected-current-range {
        %date-inner {
            color: var-get($theme, 'date-selected-current-range-foreground');
            background: var-get($theme, 'date-selected-current-range-background');

            &::after {
                display: block;
            }

            &:hover {
                color: var-get($theme, 'date-selected-current-range-hover-foreground');
                background: var-get($theme, 'date-selected-current-range-hover-background');
            }
        }
    }


    %date-selected-current-range-active {
        %date-inner {
            color: var-get($theme, 'date-selected-current-range-focus-foreground');
            background: var-get($theme, 'date-selected-current-range-focus-background');

            @if $variant != 'indigo-design' {
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-focus-outline');
            }
        }
    }

    %date-selected-current-range-special {
        %date-inner {
            &::after {
                width: $date-inner-size;
                height: $date-inner-size;
                box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-focus-outline');
            }
        }
    }

    %date-range-selected-active {
        %date-inner {
            color: var-get($theme, 'date-selected-range-focus-foreground');
            background: var-get($theme, 'date-selected-range-focus-background');
        }
    }

    %date-range-selected-active-first {
        %date-inner {
            color: var-get($theme, 'date-selected-range-start-focus-foreground');
            background: var-get($theme, 'date-selected-range-start-focus-background');
            border-inline-start-color: transparent;
        }
    }

    %date-range-selected-active-last {
        %date-inner {
            color: var-get($theme, 'date-selected-range-end-focus-foreground');
            background: var-get($theme, 'date-selected-range-end-focus-background');
            border-inline-end-color: transparent;
        }
    }

    %date-range {
        border-top-color: var-get($theme, 'date-range-border-color');
        border-bottom-color: var-get($theme, 'date-range-border-color');
        background: var-get($theme, 'date-selected-range-background');

        %date-inner {
            @if $variant == 'bootstrap' {
                background: transparent;
            } @else {
                background: var-get($theme, 'date-selected-range-background');
            }
            color: var-get($theme, 'date-selected-range-foreground');

            @if $variant == 'fluent' {
                border-block: 0;
                height: calc(#{$date-height} - #{$border-size * 2});
            } @else {
                height: $date-height;
            }
        }
    }

    %date-range-hover,
    %date-range-focus {
        border-top-color: var-get($theme, 'date-range-border-color');
        border-bottom-color: var-get($theme, 'date-range-border-color');
    }

    %date-range-first,
    %date-range-last {
        background: transparent;
        border-top-color: transparent;
        border-bottom-color: transparent;

        z-index: 0;

        &::before,
        &::after {
            width: 50%;
            position: absolute;
            content: '';
            background: var-get($theme, 'date-selected-range-background');
            z-index: -1;

            @if $variant != 'fluent' {
                color: var-get($theme, 'date-selected-foreground');
            }
        }
    }

    %date-range-first {
        %date-inner,
        &::before {
            border-radius: var-get($theme, 'date-range-border-radius');
        }

        @if $variant != 'fluent' {
            &::before {
                display: none;
            }
        }

        %date-inner {
            color: var-get($theme, 'date-selected-range-start-foreground');
            background: var-get($theme, 'date-selected-range-start-background');
            border-inline-start-color: transparent;
        }

        &%date-range-last {
            border-radius: var-get($theme, 'date-range-border-radius')
        }
    }

    %date-range-first-hover {
        %date-inner {
            border-inline-start-color: transparent;
            color: var-get($theme, 'date-selected-range-start-hover-foreground');
            background: var-get($theme, 'date-selected-range-start-hover-background');
        }
    }

    %date-range-last {
        %date-inner,
        &::after {
            border-radius: var-get($theme, 'date-range-border-radius');
        }

        @if $variant != 'fluent' {
            &::after {
                display: none;
            }
        }

        %date-inner {
            color: var-get($theme, 'date-selected-range-end-foreground');
            background: var-get($theme, 'date-selected-range-end-background');
            border-inline-end-color: transparent;
        }
    }

    %date-range-last-hover {
        %date-inner {
            color: var-get($theme, 'date-selected-range-end-hover-foreground');
            background: var-get($theme, 'date-selected-range-end-hover-background');
            border-inline-end-color: transparent;
        }
    }

    %date-range-current-first,
    %date-range-current-last {
        %date-inner {
            @if $variant == 'fluent' {
                color: var-get($theme, 'date-selected-current-range-foreground');
            }
        }
    }

    %date-first {
        &::before {
            width: $date-size;
            inset-inline-start: calc(50% - ((#{$date-size} / 2) + #{$border-size}));
            border-inline-start: $border-size solid var-get($theme, 'date-range-border-color');
        }

        &::after {
            inset-inline-start: 50%;
        }
    }

    %date-last {
        &::before {
            inset-inline-end: 50%;
        }

        &::after {
            width: $date-size;
            inset-inline-end: calc(50% - ((#{$date-size} / 2) + #{$border-size}));
            border-inline-end: $border-size solid var-get($theme, 'date-range-border-color');
        }
    }

    %date-first-last {
        %date-inner {
            @if $variant == 'fluent' {
                background: transparent;
            }
        }
    }

    %date-range-selected {
        &::before,
        &::after {
            border-block: $border-size solid var-get($theme, 'date-range-border-color');
        }

        %date-inner {
            border-inline-color: transparent;

            &:hover {
                background: var-get($theme, 'date-selected-range-hover-background');
                color: var-get($theme, 'date-selected-range-hover-foreground');
            }
        }
    }

    // RANGE END

    // PREVIEW START
    %date-range-preview {
        @if $variant == 'bootstrap' {
            background: var-get($theme, 'date-selected-range-background');

            &::before,
            &::after {
                background: var-get($theme, 'date-selected-range-background');
            }
        }

        @if $variant == 'material' or $variant == 'indigo-design' {
            border-block-style: dashed;
        }

        position: relative;

        %date-inner {
            color: var-get($theme, 'date-selected-range-foreground');
        }
    }

    %date-range-preview-hover {
        %date-inner {
            color: var-get($theme, 'date-selected-range-hover-foreground');

            @if $variant == 'fluent' {
                background: transparent;
            }
        }
    }

    %date-range-preview-current {
        %date-inner {
            color: var-get($theme, 'date-selected-current-range-foreground');

            @if $variant == 'bootstrap' {
                color: var-get($theme, 'date-selected-current-range-foreground');
                background: var-get($theme, 'date-selected-current-range-background');
            }
        }
    }

    %date-range-preview-current-active {
        @if $variant == 'fluent' {
            background: transparent;
        }
    }

    %date-range-preview:not(%date-first-preview),
    %date-range-preview:not(%date-last-preview) {
        border-block-color: var-get($theme, 'date-range-preview-border-color');
    }

    %date-first-preview,
    %date-last-preview {
        background: transparent;

        &::after {
            content: '';
            position: absolute;
            height: var-get($theme, 'size');

            // Otherwise fluent has gaps in the range preview selection
            @if $variant == 'fluent' {
                width: calc(50% + #{rem(2px)});
            } @else {
                width: calc(50% + #{rem(1px)});
            }

            border-width: rem(1px);

            border-inline-color: transparent;

            @if $variant == 'material' or $variant == 'indigo-design' {
                border-style: dashed;
            } @else {
                border-style: solid;
            }

            border-block-color: var-get($theme, 'date-range-preview-border-color');
        }

        %date-inner {
            @if $variant == 'bootstrap' {
                color: var-get($theme, 'date-selected-foreground');
                background: var-get($theme, 'date-selected-background');

                &::after {
                    box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-foreground');
                }
            }
        }
    }

    %date-first-preview {
        border-block-color: transparent !important;

        %date-inner {
            @if $variant == 'fluent' {
                background: transparent !important;
                border-color: var-get($theme, 'date-range-preview-border-color');
                border-inline-end-color: transparent !important;
            }
        }

        &::after {
            inset-inline-start: calc(50% - #{$border-size});
        }
    }

    %date-last-preview {
        border-block-color: transparent !important;

        %date-inner {
            @if $variant == 'fluent' {
                background: transparent !important;
                border-color: var-get($theme, 'date-range-preview-border-color');
                border-inline-start-color: transparent !important;
            }
        }

        &::after {
            inset-inline-end: calc(50% - #{$border-size});
        }
    }
    // PREVIEW END

    %date-disabled {
        pointer-events: none;
        cursor: not-allowed;

        %date-inner {
            opacity: .38;
        }
    }

    %date-hidden {
        cursor: default;
        visibility: hidden;
    }
}

/// Adds typography styles for the igx-calendar component.
/// Uses the 'h4', 'subtitle-1' and 'body-1'
/// category from the typographic scale.
/// @group typography
/// @param {Map} $categories [(header-year: 'subtitle-1', header-date: 'h4', picker-date: 'subtitle-1', content: 'subtitle-1')] - The categories from the typographic scale used for type styles.
@mixin calendar-typography(
    $categories: (
        header-year: 'overline',
        header-date: 'h4',
        weekday-label: 'body-1',
        picker-date: 'subtitle-1',
        content: 'body-1'
    )
) {
    $header-year: map.get($categories, 'header-year');
    $header-date: map.get($categories, 'header-date');
    $weekday-label: map.get($categories, 'weekday-label');
    $picker-date: map.get($categories, 'picker-date');
    $content: map.get($categories, 'content');

    %header-year {
        @include type-style($header-year) {
            margin: 0;
        }
    }

    %header-date {
        @include type-style($header-date);
    }

    %picker-dates,
    %picker-date {
        @include type-style($picker-date) {
            margin: 0;
        }
    }

    %date-inner {
        @include type-style($content) {
            font-size: sizable(var(--ig-body-2-font-size), var(--ig-body-2-font-size), var(--ig-body-1-font-size));
            margin: 0;
        }
    }

    %weekday-label {
        @include type-style($weekday-label, false);
        margin: 0;
    }
}
