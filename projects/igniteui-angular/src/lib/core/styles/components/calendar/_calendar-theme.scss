@use 'sass:map';
@use 'sass:meta';
@use 'sass:math';
@use '../../base' as *;
@use '../../themes/schemas' as *;

////
/// @group themes
/// @access public
/// @author <a href="https://github.com/simeonoff" target="_blank">Simeon Simeonoff</a>
/// @author <a href="https://github.com/desig9stein" target="_blank">Marin Popov</a>
////

/// If only header background color is specified, that color will be
/// used as the leading color for all accented elements, such as:
/// - current date color
/// - selected date background
/// - picker elements hover colors
/// - year/month hover/selected colors
/// If only background colors are specified, text/icon colors
/// will be assigned automatically to a contrasting color.
/// @param {Map} $schema [$light-material-schema] - The schema used as basis for styling the component.
/// @param {Color} $content-background [null] - The main content background color.
/// @param {Color} $content-text-color [null] - The main content text color.
///
/// @param {Color} $picker-background-color [null] - The igx-calendar-picker background color.
/// @param {Color} $border-color [null] - The calendar border color.
///
/// @param {Color} $header-background [null] - The header background color.
/// @param {Color} $header-text-color [null] - The header text color.
///
/// @param {Color} $picker-arrow-color [null] - The idle picker arrow color.
/// @param {Color} $picker-arrow-hover-color [null] - The picker hover arrow color.
///
/// @param {Color} $picker-text-color [null]- The idle picker month/year color.
/// @param {Color} $picker-text-hover-color [null]-  The hover picker month/year color.
///
/// @param {Color} $inactive-text-color [null] - The text color for previous and next month dates.
/// @param {Color} $label-color [null] - The text color for weekday labels.
/// @param {Color} $weekend-text-color [null] - The text color for weekend days.
///
/// @param {Color} $year-current-text-color [null] - The text color for the current/selected year.
///
/// @param {Color} $month-current-text-color [null]- The text color for the current month.
/// @param {Color} $month-selected-current-text-color [null]- The text color for the current/selected month.
/// @param {Color} $month-hover-current-text-color [null]- The text color for the current/selected month on hover.
/// @param {Color} $month-hover-text-color [null] - The month hover text color.
/// @param {Color} $month-hover-background [null] - The month hover background color.
///
/// @param {Color} $year-hover-text-color [null] - The year hover text color.
///
/// @param {Color} $date-selected-background [null] - The background color for the selected date.
/// @param {Color} $date-selected-hover-background [null] - The hover background color for the selected date.
/// @param {Color} $date-selected-focus-background [null] - The focus background color for the selected date.
/// @param {Color} $date-selected-text-color [null] - The text color for the selected date.
/// @param {Color} $date-selected-hover-foreground [null] - The hover text color for the selected date.
/// @param {Color} $date-selected-focus-foreground [null] - The focus text color for the selected date.
/// @param {Color} $date-selected-background-range [null] - The background color for the selected range.
/// @param {Color} $date-selected-color-range [null] - The text color for the selected range.
///
/// @param {Color} $date-hover-background [null] - The hover date background color.
/// @param {Color} $date-focus-background [null] - The focus date background color.
/// @param {Color} $date-current-text-color [null] - The text color for the current date.
/// @param {Color} $date-current-bg-color [null] - The background color for the current date.
/// @param {Color} $date-current-hover-background [null] - The hover background color for the current date.
/// @param {Color} $date-current-focus-background [null] - The focus background color for the current date.
/// @param {Color} $date-current-hover-foreground [null] - The hover text color for the current date.
/// @param {Color} $date-current-focus-foreground [null] - The focus text color for the current date.
/// @param {Color} $date-selected-current-background [null] - The background color for the selected/current date.
/// @param {Color} $date-selected-current-hover-background [null] - The hover background color for the selected/current date.
/// @param {Color} $date-selected-current-focus-background [null] - The focus background color for the selected/current date.
/// @param {Color} $date-selected-current-foreground [null] - The text color for the selected/current date.
/// @param {Color} $date-selected-current-hover-foreground [null] - The hover text color for the selected/current date.
/// @param {Color} $date-selected-current-focus-foreground [null] - The focus text color for the selected/current date.
///
/// @param {Color} $date-special-background [null] - The background color used for special dates.
/// @param {Color} $date-special-text-color [null] - The text color used for special dates.
///
/// @param {Color} $date-disabled-text-color [null] - The text color for disabled dates.
/// @param {Color} $date-disabled-background [null] - The background color for disabled dates in a range.
///
/// @param {List} $border-radius [null] - The border radius used for the outline of the calendar.
/// @param {List} $date-border-radius [null] - The border radius used for the outline outline of the date.
/// @param {List} $month-border-radius [null] - The border radius used for the outline outline of the month.
///
/// @param {Color} $week-number-color [null] - The text color of the week number column.
/// @param {Color} $week-number-background [null] - The background color of the week number column.
///
/// @requires $light-material-schema
///
/// @example scss Change the header and content background colors
///   $my-calendar-theme: calendar-theme(
///     $header-background: purple,
///     $content-background: black
///   );
///   // Pass the theme to the css-vars() mixin
///   @include css-vars($my-calendar-theme);
@function calendar-theme(
    $schema: $light-material-schema,

    $content-background: null,
    $content-text-color: null,

    $border-radius: null,
    $date-border-radius: null,
    $month-border-radius: null,

    $header-background: null,
    $header-text-color: null,

    $picker-arrow-color: null,
    $picker-arrow-hover-color: null,

    $picker-text-color: null,
    $picker-text-hover-color: null,

    $inactive-text-color: null,
    $weekend-text-color: null,

    $year-current-text-color: null,
    $month-current-text-color: null,
    $month-selected-current-text-color: null,

    $year-hover-text-color: null,
    $month-hover-text-color: null,
    $month-hover-current-text-color: null,
    $month-hover-selected-current-text-color: null,
    $month-hover-background: null,

    $date-selected-background: null,
    $date-selected-hover-background: null,
    $date-selected-focus-background: null,
    $date-selected-text-color: null,
    $date-selected-hover-foreground: null,
    $date-selected-focus-foreground: null,
    $date-selected-background-range: null,
    $date-selected-color-range: null,
    $date-selected-background-selected-range-hover: null,
    $date-selected-color-selected-range-hover: null,

    $date-current-bg-color: null,
    $date-current-text-color: null,
    $date-current-hover-foreground: null,
    $date-current-focus-foreground: null,
    $date-current-hover-background: null,
    $date-current-focus-background: null,
    $date-selected-current-background: null,
    $date-selected-current-foreground: null,
    $date-selected-current-hover-background: null,
    $date-selected-current-hover-foreground: null,
    $date-selected-current-focus-background: null,
    $date-selected-current-focus-foreground: null,

    $date-hover-background: null,
    $date-focus-background: null,

    $date-special-background: null,
    $date-special-text-color: null,

    $date-disabled-text-color: null,
    $date-disabled-background: null,
    $border-color: null,
    $border-width: null,
    $picker-background-color: null,
    $label-color: null,
    $week-number-color: null,
    $week-number-background: null,
) {
    $name: 'igx-calendar';
    $selector: 'igx-calendar, igx-days-view, igx-months-view, igx-years-view, .igx-date-picker';
    $calendar-schema: ();

    @if map.has-key($schema, 'calendar') {
        $calendar-schema: map.get($schema, 'calendar');
    } @else {
        $calendar-schema: $schema;
    }

    $theme: digest-schema($calendar-schema);
    $meta: map.get($theme, '_meta');
    $variant: map.get($schema, '_meta', 'theme');
    $not-bootstrap-theme: $variant != 'bootstrap';
    $bootstrap-theme: $variant == 'bootstrap';

    @if not($content-text-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $content-text-color: text-contrast($content-background);
        }
    }

    @if not($picker-background-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $picker-background-color: $content-background;
        }
    }

    @if not($weekend-text-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $weekend-text-color: rgba($content-text-color, .7);
        }
    }

    @if not($inactive-text-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $inactive-text-color: rgba($content-text-color, .5);
        }
    }

    @if not($label-color) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $label-color: rgba($content-text-color, .5);
        }
    }

    @if not($picker-arrow-color) and $content-background {
        $picker-arrow-color: $content-text-color;
    }

    @if not($picker-arrow-hover-color) and $header-background {
        @if meta.type-of($header-background) == 'color' {
            $picker-arrow-hover-color: $header-background;
        }
    }

    @if not($picker-text-color) and $content-background {
        $picker-text-color: $content-text-color;
    }

    @if not($date-selected-text-color) and $date-selected-background {
        $date-selected-text-color: text-contrast($date-selected-background);
    }

    @if not($date-selected-hover-foreground) and $date-selected-hover-background {
        $date-selected-hover-foreground: text-contrast($date-selected-hover-background);
    }

    @if not($date-selected-focus-foreground) and $date-selected-focus-background {
        $date-selected-focus-foreground: text-contrast($date-selected-focus-background);
    }

    @if not($date-hover-background) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $date-hover-background: rgba(text-contrast($content-background), .12);
        }
    }

    @if $not-bootstrap-theme {
        @if not($picker-text-hover-color) and $header-background {
            $picker-text-hover-color: $header-background;
        }

        @if not($header-text-color) and $header-background {
            $header-text-color: text-contrast($header-background);
        }

        @if not($date-selected-background) and $header-background {
            $date-selected-background: $header-background;
        }

        @if not($date-selected-current-background) and $date-selected-background {
            $date-selected-current-background: $date-selected-background;
        }

        @if not($date-selected-current-hover-background) and $date-selected-hover-background {
            $date-selected-current-hover-background: $date-selected-hover-background;
        }

        @if not($date-selected-current-focus-background) and $date-selected-focus-background {
            $date-selected-current-focus-background: $date-selected-focus-background;
        }

        @if not($date-selected-text-color) and $header-background {
            $date-selected-text-color: text-contrast($header-background);
        }

        @if not($date-current-text-color) and $header-background {
            $date-current-text-color: $header-background;
        }

        @if not($date-current-hover-foreground) {
            $date-current-hover-foreground: $date-current-text-color;
        }

        @if not($date-current-focus-foreground) {
            $date-current-focus-foreground: $date-current-text-color;
        }

        @if not($year-hover-text-color) and $header-background {
            $year-hover-text-color: $header-background;
        }

        @if not($year-current-text-color) and $header-background {
            $year-current-text-color: $header-background;
        }

        @if not($month-current-text-color) and $header-background {
            @if $header-background == 'color' {
                $month-current-text-color: $header-background;
            }
        }
    }

    @if not($date-special-background) and $content-background {
        @if meta.type-of($content-background) == 'color' {
            $date-special-background: rgba(text-contrast($content-background), .04);
        }
    }

    @if not($date-special-text-color) and $date-special-background {
        $date-special-text-color: text-contrast($date-special-background);
    }

    @if not($month-hover-text-color) and $month-hover-background {
        @if meta.type-of($month-hover-background) == 'color' {
            $month-hover-text-color: text-contrast($month-hover-background);
        }
    }

    @if not($month-hover-current-text-color) and $month-hover-background {
        @if meta.type-of($month-hover-background) == 'color' {
            $month-hover-current-text-color: text-contrast($month-hover-background);
        }
    }

    @if not($date-disabled-text-color) and $date-disabled-background {
        @if meta.type-of($date-disabled-background) == 'color' {
            $date-disabled-color: rgba(text-contrast($date-disabled-background), .38);
        }
    }

    @if not($week-number-color) and $week-number-background {
        $week-number-color: text-contrast($week-number-background);
    }

    @return extend($theme, (
        name: $name,
        selector: $selector,
        content-background: $content-background,
        content-text-color: $content-text-color,
        header-background: $header-background,
        header-text-color: $header-text-color,
        border-radius: $border-radius,
        date-border-radius: $date-border-radius,
        month-border-radius: $month-border-radius,
        border-color: $border-color,
        picker-background-color: $picker-background-color,
        border-width: $border-width,
        picker-arrow-color: $picker-arrow-color,
        picker-arrow-hover-color: $picker-arrow-hover-color,
        picker-text-color: $picker-text-color,
        picker-text-hover-color: $picker-text-hover-color,
        weekend-text-color: $weekend-text-color,
        inactive-text-color: $inactive-text-color,
        label-color: $label-color,
        year-current-text-color: $year-current-text-color,
        month-current-text-color: $month-current-text-color,
        month-selected-current-text-color: $month-selected-current-text-color,
        year-hover-text-color: $year-hover-text-color,
        month-hover-text-color: $month-hover-text-color,
        month-hover-current-text-color: $month-hover-current-text-color,
        month-hover-selected-current-text-color: $month-hover-selected-current-text-color,
        month-hover-background: $month-hover-background,
        date-selected-background: $date-selected-background,
        date-selected-text-color: $date-selected-text-color,
        date-selected-hover-background: $date-selected-hover-background,
        date-selected-focus-background: $date-selected-focus-background,
        date-selected-hover-foreground: $date-selected-hover-foreground,
        date-selected-focus-foreground: $date-selected-focus-foreground,
        date-selected-background-range: $date-selected-background-range,
        date-selected-color-range: $date-selected-color-range,
        date-selected-background-selected-range-hover: $date-selected-background-selected-range-hover,
        date-selected-color-selected-range-hover: $date-selected-color-selected-range-hover,
        date-current-bg-color: $date-current-bg-color,
        date-current-text-color: $date-current-text-color,
        date-current-hover-background: $date-current-hover-background,
        date-current-focus-background: $date-current-focus-background,
        date-current-hover-foreground: $date-current-hover-foreground,
        date-current-focus-foreground: $date-current-focus-foreground,
        date-selected-current-background: $date-selected-current-background,
        date-selected-current-hover-background: $date-selected-current-hover-background,
        date-selected-current-focus-background: $date-selected-current-focus-background,
        date-selected-current-foreground: $date-selected-current-foreground,
        date-selected-current-hover-foreground: $date-selected-current-hover-foreground,
        date-selected-current-focus-foreground: $date-selected-current-focus-foreground,
        date-hover-background: $date-hover-background,
        date-focus-background: $date-focus-background,
        date-special-text-color: $date-special-text-color,
        date-special-background: $date-special-background,
        date-disabled-text-color: $date-disabled-text-color,
        date-disabled-background: $date-disabled-background,
        week-number-color: $week-number-color,
        week-number-background: $week-number-background,
        _meta: map.merge(if($meta, $meta, ()), (
            variant: map.get($schema, '_meta', 'theme')
        )),
    ));
}

/// @param {Map} $theme - The theme used to style the component.
@mixin calendar($theme) {
    @include css-vars($theme);

    $cal-header-year-margin: 0;
    $cal-header-date-margin: 0;
    $cal-header-padding: rem(16px);

    $variant: map.get($theme, '_meta', 'variant');
    $bootstrap-theme: $variant == 'bootstrap';
    $not-bootstrap-theme: $variant != 'bootstrap';

    $cal-picker-padding: map.get((
        material: rem(16px),
        fluent: rem(16px),
        bootstrap: rem(8px),
        indigo-design: rem(16px),
    ), $variant);

    $cal-value-w: map.get((
        material: rem(32px),
        fluent: rem(40px),
        bootstrap: rem(32px),
        indigo-design: rem(40px),
    ), $variant);

    $cal-value-h: $cal-value-w;

    $border-size: rem(1px);

    $border-width: map.get((
        material: 0,
        fluent: 0,
        bootstrap: 1px,
        indigo-design: 0
    ), $variant);

    $border-radius: map.get((
        material: 4px,
        fluent: 0,
        bootstrap: 0,
        indigo-design: 8px
    ), $variant);

    $cal-value-fw: 600;

    $cal-row-padding: rem(8px);
    $cal-row-margin: rem(2px) 0;

    %cal-display {
        display: flex;
        flex-flow: column nowrap;
        width: 100%;
        min-width: rem(290px);
        background: var-get($theme, 'content-background');
        outline: none;
        border-radius: var-get($theme, 'border-radius');
        overflow: hidden;
        border: $border-width solid var-get($theme, 'border-color');

        %cal-display {
            @if $bootstrap-theme {
                border: none;
                border-radius: 0;
            }
        }
    }

    igx-calendar-container {
        @if $bootstrap-theme {
            %cal-display {
                border: 0;
                border-radius: 0;
            }

            margin-bottom: 0;

            %cal-picker-display {
                padding-bottom: 0;
            }

            %cal-picker-arrow {
                top: $cal-picker-padding;
            }
        }
    }

    igx-month-picker {
        %cal-picker-display {
            @if $bootstrap-theme {
                border-bottom: rem(1px) solid var-get($theme, 'border-color');
            }
        }
    }

    %cal-display--vertical {
        flex-flow: row nowrap;

        %cal-header-display {
            min-width: rem(168px);
        }
    }

    %cal-header-display {
        background: var-get($theme, 'header-background');
        color: var-get($theme, 'header-text-color');
        padding: $cal-header-padding;

        @if $bootstrap-theme {
            display: none;
        }
    }

    %cal-header-year {
        margin: $cal-header-year-margin;
        color: currentColor;
        opacity: .8;

        @if $variant == 'indigo-design' {
            opacity: 1;
        }
    }

    %cal-header-date {
        display: flex;
        margin: $cal-header-date-margin;

        > span {
            @include ellipsis();
        }
    }

    %cal-header-date--vertical {
        flex-flow: column nowrap;
    }

    %cal-picker-display {
        display: flex;
        justify-content: space-between;
        height: rem(50px);
        align-items: center;
        padding-inline: rem(16px);
        gap: rem(24px);
        background: var-get($theme, 'picker-background-color');

        @if $bootstrap-theme {
            height: auto;
            padding-top: $cal-picker-padding;
        }

        position: relative;

        &:focus {
            outline: none;
        }
    }

    %cal-picker-dates {
        display: flex;
    }

    %cal--days-view {
        display: flex;
        gap: rem(6px);
        padding: 0 rem(12px) $cal-picker-padding rem(12px)
    }

    %cal__days-views {
        display: flex;
    }

    %cal-picker__nav {
        display: flex;
        gap: rem(24px);
        position: absolute;
        inset-inline-end: rem(16px);
    }

    %cal-picker-arrow {
        display: flex;
        justify-content: center;
        align-items: center;
        color: var-get($theme, 'picker-arrow-color');
        user-select: none;
        outline: none;
        cursor: pointer;

        @if $bootstrap-theme {
            top: math.div($cal-picker-padding, 2);
        }

        &:focus,
        &:hover {
            color: var-get($theme, 'picker-arrow-hover-color');
        }

        [dir='rtl'] & {
            transform: scaleX(-1);
        }

        igx-icon {
            --component-size: 2;
        }
    }

    %cal-picker-date {
        color: var-get($theme, 'picker-text-color');
        text-align: center;
        outline: none;
        padding: 0 rem(2px);

        &:hover,
        &:focus {
            color: var-get($theme, 'picker-text-hover-color');
            cursor: pointer;
        }
    }

    %cal-body-display {
        flex: 1 1 auto;
        overflow: hidden;
    }

    %cal-body-inner {
        display: flex;
        padding: 0 rem(12px) rem(16px) rem(12px);
        gap: rem(6px);
    }

    igx-years-view,
    igx-month-picker,
    igx-months-view {
        color: var-get($theme, 'content-text-color');

        %cal-body-display {
            @if $bootstrap-theme {
                padding-bottom: 0;
            }
        }
    }

    %cal-value {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        color: var-get($theme, 'content-text-color');
        outline: none;
        height: $cal-value-h;
        border-block-start: rem(1px) solid transparent;
        border-block-end: rem(1px) solid transparent;
        width: 100%;
    }

    %cal-row-display {
        display: flex;
        justify-content: space-between;

        &:last-of-type {
            %cal-value-content--week-number {
                border-bottom-left-radius: $border-radius;
                border-bottom-right-radius: $border-radius;

                &::before {
                    display: none;
                }
            }

            @if $bootstrap-theme {
                margin-bottom: 0;
            }
        }
    }

    %cal-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax($cal-value-w, 1fr));
        row-gap: rem(4px);
        padding: 0 rem(12px) rem(16px) rem(12px);
        justify-items: center;
    }

    %cal-row-display--wrap {
        flex-wrap: wrap;

        &:first-of-type {
            @if $bootstrap-theme {
                background: transparent;
                margin-bottom: 0;
                border-bottom: 0;
                padding: 0;
            }
        }
    }

    %cal-column-display {
        display: flex;
        flex-flow: column nowrap;
        justify-content: space-between;
        align-items: center;
    }

    %cal-column-year {
        padding: 0;
        margin: 0;

        %cal-value--year {
            flex: 1 0 0;
        }
    }

    %cal-value--focus,
    %cal-value--hover {
        @if $bootstrap-theme {
            color: var-get($theme, 'date-selected-text-color');
        }
    }

    %cal-value--hover {
        %cal-value-content {
            background: var-get($theme, 'date-hover-background');
        }
    }

    %cal-value--focus {
        %cal-value-content {
            background: var-get($theme, 'date-focus-background');
        }
    }

    %cal-value-content {
        position: relative;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        width: $cal-value-w;
        min-width: $cal-value-w;
        height: $cal-value-h;
        border-radius: var-get($theme, 'date-border-radius');
        border: rem(1px) solid transparent;
        z-index: 0;
    }

    %cal-value--label {
        @if $not-bootstrap-theme {
            height: $cal-value-h;
        }

        color: var-get($theme, 'label-color');

        &:hover,
        &:focus {
            color: var-get($theme, 'label-color');
        }

        border-radius: 0;

        @if $bootstrap-theme {
            font-style: italic;
            cursor: default;
        }
    }

    %cal-value--weekend {
        color: var-get($theme, 'weekend-text-color');
    }

    %cal-value-date--week-number + %cal-value {
        padding-inline-start: 0 !important;
    }

    %label--week-number,
    %cal-value-content--week-number {
        position: relative;
        color: var-get($theme, 'week-number-color');
        border-radius: 0;
        pointer-events: none;
        z-index: 1;
    }

    %cal-value-date--week-number {
        cursor: default;

        &:hover,
        &:focus {
            %cal-value-content--week-number {
                color: var-get($theme, 'week-number-color') !important;
            }
        }
    }

    %cal-value-content--week-number {
        position: relative;
        background: var-get($theme, 'week-number-background') !important;
        min-width: auto;
        width: $cal-value-w;

        &::after {
            display: none;
        }

        &::before {
            content: '';
            position: absolute;
            background: var-get($theme, 'week-number-background') !important;
            inset-inline-start: rem(-1px);
            inset-block-start: 100%;
            height: 100%;
            width: $cal-value-w;
            border-inline: rem(1px) solid var-get($theme, 'week-number-background');
        }
    }

    %label--week-number {
        text-align: center;

        span {
            display: flex;
            justify-content: center;
            align-items: center;
            width: $cal-value-w;
            height: $cal-value-h;
            position: relative;
            background: var-get($theme, 'week-number-background');
            border-top-left-radius: $border-radius;
            border-top-right-radius: $border-radius;
            border: rem(1px) solid transparent;

            &::before {
                content: '';
                position: absolute;
                background: var-get($theme, 'week-number-background');
                inset-inline-start: rem(-1px);
                inset-block-start: 100%;
                height: 100%;
                width: $cal-value-w;
                border-inline: rem(1px) solid var-get($theme, 'week-number-background');
            }
        }
    }

    %cal-value--year,
    %cal-value--month {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        flex: 1;
        cursor: pointer;
        z-index: 1;
    }

    %cal-value--year-inner,
    %cal-value--month-inner {
        display: flex;
        justify-content: center;
        align-items: center;
        height: $cal-value-h;
        width: 100%;
        border-radius: var-get($theme, 'month-border-radius');
        padding: 0 rem(12px);
    }

    %cal-value--year-focus,
    %cal-value--month-focus {
        outline: none;
    }

    %cal-value--year-current {
        %cal-value--year-inner {
            color: var-get($theme, 'year-current-text-color');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'year-current-text-color');
        }
    }

    %cal-value--month-current {
        %cal-value--month-inner {
            color: var-get($theme, 'month-current-text-color');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'month-current-text-color');
        }
    }

    %cal-value--year-focus,
    %cal-value--year-hover {
        %cal-value--year-inner {
            color: var-get($theme, 'year-hover-text-color');
            // TODO Add year-hover-background to schema
            background: var-get($theme, 'month-hover-background');
        }
    }

    %cal-value--month-hover,
    %cal-value--month-focus {
        %cal-value--month-inner {
            color: var-get($theme, 'month-hover-text-color');
            background: var-get($theme, 'month-hover-background');
        }
    }

    cal-value--month-current-selected {
        %cal-value--month-inner {
            color: var-get($theme, 'month-selected-current-text-color');
            background: var-get($theme, 'date-selected-current-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'month-selected-current-text-color'), 0 0 0 rem(1px) var-get($theme, 'date-selected-current-background');
        }
    }

    %cal-value--month-current-hover {
        %cal-value--month-inner {
            color: var-get($theme, 'month-hover-selected-current-text-color');
            background: var-get($theme, 'date-selected-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'month-hover-selected-current-text-color'), 0 0 0 rem(1px) var-get($theme, 'date-selected-current-background');
        }
    }

    %cal-value--month-current-focus {
        %cal-value--month-inner {
            color: var-get($theme, 'month-hover-selected-current-text-color');
            background: var-get($theme, 'date-selected-current-focus-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'month-hover-selected-current-text-color'), 0 0 0 rem(1px) var-get($theme, 'date-selected-current-background');
        }
    }

    %cal-value--inactive {
        cursor: pointer;
        color: var-get($theme, 'inactive-text-color');
    }

    %cal-value--inactive--single--hover {
        @if $bootstrap-theme {
            color: var-get($theme, 'date-selected-text-color');
        } @else {
            color: var-get($theme, 'inactive-text-color');
        }
    }

    %cal-value--special {
        %cal-value-content {
            background: var-get($theme, 'date-special-background');
            @if $not-bootstrap-theme {
                color: var-get($theme, 'date-special-text-color');
            }
            font-weight: 900;
        }
    }

    %cal-value--single {
        background: transparent;

        &::before,
        &::after {
            background: transparent;
        }

        @if $bootstrap-theme {
            &:hover,
            &:focus {
                color: var-get($theme, 'date-selected-text-color');
            }
        }
    }

    %cal-value--first {
        position: relative;
        background: transparent;
        z-index: 0;

        &::after {
            position: absolute;
            content: '';
            width: 50%;
            inset-inline-start: 50%;
            background: var-get($theme, 'date-selected-background-range');
            z-index: -1;
        }
    }

    %cal-value--last {
        position: relative;
        background: transparent;
        z-index: 0;

        &::before {
            position: absolute;
            content: '';
            width: 50%;
            inset-inline-end: 50%;
            background: var-get($theme, 'date-selected-background-range');
            z-index: -1;
        }
    }

    %cal-value--hidden {
        %cal-value-content {
            visibility: hidden;
        }
    }

    %cal-value--current {
        %cal-value-content {
            color: var-get($theme, 'date-current-text-color');
            font-weight: $cal-value-fw;
            background: var-get($theme, 'date-current-bg-color');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-current-text-color');
        }
    }

    %cal-value--current--hover {
        %cal-value-content {
            color: var-get($theme, 'date-current-hover-foreground');
            background: var-get($theme, 'date-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-current-hover-foreground');
        }
    }

    %cal-value--current--focus {
        %cal-value-content {
            color: var-get($theme, 'date-current-focus-foreground');
            background: var-get($theme, 'date-current-focus-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-current-focus-foreground');
        }
    }

    %cal-value--range-first,
    %cal-value--range-last,
    %cal-value--range-first-last {
        %cal-value-content {
            background: var-get($theme, 'date-selected-background');
            color: var-get($theme, 'date-selected-text-color');
        }
    }

    %cal-value--range-selected-hover {
        %cal-value-content {
            background: var-get($theme, 'date-selected-background-selected-range-hover');
            color: var-get($theme, 'date-selected-color-selected-range-hover');
        }
    }

    %cal-value--selected--focus {
        %cal-value-content {
            background: var-get($theme, 'date-selected-focus-background');
            color: var-get($theme, 'date-selected-focus-foreground');
        }
    }

    %cal-value--selected--hover {
        %cal-value-content {
            color: var-get($theme, 'date-selected-hover-foreground');
            background: var-get($theme, 'date-selected-hover-background');
        }
    }

    %cal-value--range-first-last {
        &::before,
        &::after {
            border-block-color: transparent;
        }
    }

    %cal-value--selected--current-range {
        %cal-value-content {
            background: var-get($theme, 'date-selected-background-range');
            color: var-get($theme, 'date-selected-color-range');
        }
    }

    %cal-value--selected--current-range-hover {
        %cal-value-content {
            background: var-get($theme, 'date-hover-background');
            color: var-get($theme, 'content-text-color');
        }
    }

    %cal-value--selected--current-range-focus {
        %cal-value-content {
            background: var-get($theme, 'date-focus-background');
            color: var-get($theme, 'content-text-color');
        }
    }

    %cal-value--selected--current--hover {
        %cal-value-content {
            color: var-get($theme, 'date-selected-current-hover-foreground');
            background: var-get($theme, 'date-selected-current-hover-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-hover-foreground');
        }
    }

    %cal-value--selected--current--focus {
        %cal-value-content {
            color: var-get($theme, 'date-selected-current-focus-foreground');
            background: var-get($theme, 'date-selected-current-focus-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-focus-foreground');
        }
    }

    %cal-value--selected--current {
        %cal-value-content {
            color: var-get($theme, 'date-selected-current-foreground');
            background: var-get($theme, 'date-selected-current-background');
            box-shadow: inset 0 0 0 rem(1px) var-get($theme, 'date-selected-current-foreground'), 0 0 0 rem(1px) var-get($theme, 'date-selected-current-background');

            @if $variant == 'indigo-design' {
                font-weight: 700;
            }
        }
    }

    %cal-value--selected {
        position: relative;

        %cal-value-content {
            color: var-get($theme, 'date-selected-text-color');
            background: var-get($theme, 'date-selected-background');
        }

        &::before,
        &::after {
            height: $cal-value-h;
            top: calc($border-size * -1);
            border-block: $border-size solid var-get($theme, 'date-selected-background-range');
        }
    }

    %cal-value--range {
        background: var-get($theme, 'date-selected-background-range');
        color: var-get($theme, 'date-selected-color-range');

        %cal-value-content {
            background: var-get($theme, 'date-selected-background-range');
            color: var-get($theme, 'date-selected-color-range');
        }
    }

    %cal-value--range-inactive-selected {
        %cal-value-content {
            color: var-get($theme, 'date-selected-text-color');
        }

        &:focus,
        &:hover {
            %cal-value-content {
                color: var-get($theme, 'date-selected-text-color');
            }
        }
    }

    %cal-value--range-inactive-selected-single {
        %cal-value-content {
            color: var-get($theme, 'date-selected-text-color');
            background: var-get($theme, 'date-selected-background') !important;
        }
    }

    %calendar__aria-off-screen {
        position: absolute !important;
        border: none !important;
        height: 1px !important;
        width: 1px !important;
        inset-inline-start: 0 !important;
        top: 0 !important;
        overflow: hidden !important;
        padding: 0 !important;
        margin: 0 !important;
        user-select: none;
        pointer-events: none;

        &:focus {
            outline: none;
        }
    }

    %cal-value--disabled {
        pointer-events: none;
        cursor: not-allowed;
        color: var-get($theme, 'date-disabled-text-color');
    }

    %cal-value--disabled-range {
        background: var-get($theme, 'date-disabled-background');

        %cal-value-content {
            color: var-get($theme, 'date-disabled-text-color');
            background: transparent;
        }
    }

    %cal-value--hidden%cal-value--disabled-range {
        background: transparent;
    }
}

/// Adds typography styles for the igx-calendar component.
/// Uses the 'h4', 'subtitle-1' and 'body-1'
/// category from the typographic scale.
/// @group typography
/// @param {Map} $categories [(header-year: 'subtitle-1', header-date: 'h4', picker-date: 'subtitle-1', content: 'body-1')] - The categories from the typographic scale used for type styles.
@mixin calendar-typography(
    $categories: (
        header-year: 'overline',
        header-date: 'h4',
        weekday-label: 'body-1',
        picker-date: 'subtitle-1',
        content: 'body-1'
    )
) {
    $header-year: map.get($categories, 'header-year');
    $header-date: map.get($categories, 'header-date');
    $weekday-label: map.get($categories, 'weekday-label');
    $picker-date: map.get($categories, 'picker-date');
    $content: map.get($categories, 'content');

    %cal-header-year {
        @include type-style($header-year) {
            margin: 0;
        }
    }

    %cal-header-date {
        @include type-style($header-date) {
            margin-bottom: 0;
        }
    }

    %cal-picker-date {
        @include type-style($picker-date) {
            margin: 0;
        }
    }

    %cal-value-content {
        @include type-style($content) {
            margin: 0;
        }
    }

    %cal-value--label {
        @include type-style($weekday-label, false);
        margin: 0;
    }
}
