@use 'igniteui-theming/sass/bem/index' as *;
@use 'igniteui-theming/sass/color/functions' as *;
@use 'igniteui-theming/sass/themes/functions' as *;
@use 'igniteui-theming/sass/typography/index' as *;
@use 'igniteui-theming/sass/animations/index' as *;
@use 'styles/themes/standalone' as *;
@use '../light/tokens' as *;

$_theme: $fluent;

@include themed-block(igx-day-item, fluent) {
    $date-size: var-get($_theme, 'size');
    $date-inner-size: var-get($_theme, 'inner-size');
    $date-height: $date-size;
    $border-size: rem(1px);

    @include e(inner) {
        border-width: $border-size;

        &::after {
            border-width: $border-size;
            border-radius: 50%;
            width: $date-inner-size;
            height: $date-inner-size;
        }
    }

    @include mx('selected', 'range') {
        @include e(inner) {
            &::after {
                width: $date-inner-size;
                height: $date-inner-size;
            }
        }
    }

    @include m('range') {
        @include e(inner) {
            height: 100%;
        }
    }

    @include mx('range-preview', 'special', 'current') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');
        }
    }

    @include mx('range', 'selected') {
        @include e(inner) {
            border-color: transparent !important;
        }
    }

    @include mx('range', 'selected', 'first') {
        &::before {
            content: '';
            position: absolute;
            height: $date-size;
            width: calc($date-size / 2 + #{$border-size});
            border: $border-size solid var-get($_theme, 'date-range-border-color');
            inset-inline-end: calc(50% - #{$border-size});
            border-inline-end-color: transparent;
            z-index: 3;
            pointer-events: none;
        }

        &::after {
            border-block-color: var-get($_theme, 'date-range-border-color');
            border-width: $border-size;
        }
    }

    @include mx('range', 'selected', 'last') {
        &::before {
            content: '';
            position: absolute;
            height: $date-size;
            width: calc($date-size / 2 + #{$border-size});
            border: $border-size solid var-get($_theme, 'date-range-border-color');
            inset-inline-start: calc(50% - #{$border-size});
            border-inline-start-color: transparent;
            z-index: 3;
            pointer-events: none;
        }

        &::after {
            border-block-color: var-get($_theme, 'date-range-border-color');
            border-width: $border-size;
        }
    }

    @include mx('first', 'last') {
        @include e(inner) {
            background: transparent;
        }
    }

    @include mx('range', 'selected', 'current', 'first') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');

            &:hover {
                color: var-get($_theme, 'date-selected-current-range-foreground');
            }
        }
    }

    @include mx('range', 'selected', 'current', 'last') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');

            &:hover {
                color: var-get($_theme, 'date-selected-current-range-foreground');
            }
        }
    }

    @include mx('range', 'selected', 'current', 'special') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');

            &:hover {
                color: var-get($_theme, 'date-selected-current-range-foreground');
            }

            &::after {
                width: sizable(rem(22px), rem(24px), rem(28px));
                height: sizable(rem(22px), rem(24px), rem(28px));
                border-color: var-get($_theme, 'date-current-foreground');
            }
        }
    }

    @include mx('range', 'selected', 'current', 'special', 'active', ('not': 'first')) {
        @include e(inner) {
            color: var-get($_theme, 'date-special-focus-foreground');
        }
    }

    @include mx('range', 'selected', 'current', 'first', 'special') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');

            &::after {
                width: sizable(rem(22px), rem(24px), rem(28px));
                height: sizable(rem(22px), rem(24px), rem(28px));
            }
        }
    }

    @include mx('range', 'selected', 'current', 'last', 'special') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');

            &::after {
                width: sizable(rem(22px), rem(24px), rem(28px));
                height: sizable(rem(22px), rem(24px), rem(28px));
            }
        }
    }

    @include m('current') {
        @include e(inner) {
            &::before {
                content: '';
                position: absolute;
                z-index: -1;
                width: $date-inner-size;
                height: $date-inner-size;
                border-radius: 50%;
                background: var-get($_theme, 'date-current-background');
            }
        }
    }

    @include mx('special', 'current') {
        @include e(inner) {
            color: var-get($_theme, 'date-current-foreground');

            &::after {
                border-color: var-get($_theme, 'date-current-foreground');
                width: sizable(rem(22px), rem(24px), rem(28px));
                height: sizable(rem(22px), rem(24px), rem(28px));
            }
        }
    }

    @include mx('special', 'current', 'active') {
        @include e(inner) {
            color: var-get($_theme, 'date-current-foreground');

            &::after {
                border-color: var-get($_theme, 'date-current-foreground');
                width: sizable(rem(22px), rem(24px), rem(28px));
                height: sizable(rem(22px), rem(24px), rem(28px));
            }
        }
    }

    @include mx('special', 'current', 'active', 'range') {
        @include e(inner) {
            color: var-get($_theme, 'date-current-foreground');

            &::after {
                border-color: var-get($_theme, 'date-current-foreground');
                width: sizable(rem(22px), rem(24px), rem(28px));
                height: sizable(rem(22px), rem(24px), rem(28px));
            }
        }
    }

    @include mx('first', 'range-preview') {
        &::after {
            width: calc(50% + #{rem(2px)});
            border-inline-color: transparent;
            border-style: solid;
            border-width: $border-size;
        }

        @include e(inner) {
            background: transparent;
            border-color: var-get($_theme, 'date-range-preview-border-color');
            border-inline-end-color: transparent;
        }
    }

    @include mx('last', 'range-preview') {
        &::after {
            width: calc(50% + #{rem(2px)});
            border-inline-color: transparent;
            border-style: solid;
            border-width: $border-size;
        }

        @include e(inner) {
            background: transparent;
            border-color: var-get($_theme, 'date-range-preview-border-color');
            border-inline-start-color: transparent;
        }
    }

    @include mx('first', 'inactive', 'range-preview') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-range-foreground');
        }
    }

    @include mx('last', 'inactive', 'range-preview') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-range-foreground');
        }
    }

    @include mx('first', 'range-preview', 'current', 'selected') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');
        }
    }

    @include mx('last', 'range-preview',  'current', 'selected') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-current-range-foreground');
        }
    }

    @include mx('disabled', 'special') {
        @include e(inner) {
            color: var-get($_theme, 'date-selected-foreground');
        }
    }

    @include mx('disabled', 'special', 'range', ('not': 'current')) {
        @include e(inner) {
            color: var-get($_theme, 'date-disabled-range-foreground');
        }
    }

    @include mx('disabled', 'range-preview') {
        @include e(inner) {
            color: var-get($_theme, 'date-disabled-range-foreground');
        }
    }

    @include mx('disabled', 'current') {
        @include e(inner) {
            color: var-get($_theme, 'date-current-foreground');
        }
    }

    @include mx('range', 'selected', 'first', 'disabled') {
        &::before {
            background: var-get($_theme, 'date-selected-range-background');
            z-index: -1;
        }
    }

    @include mx('range', 'selected', 'last', 'disabled') {
        &::before {
            background: var-get($_theme, 'date-selected-range-background');
            z-index: -1;
        }
    }
}

@include themed-block(igx-days-row, fluent) {
    height: var-get($_theme, 'size');

    &:nth-child(2) {
        @include e(day, $m: week-number) {
            border-start-start-radius: var-get($_theme, 'week-number-border-radius');
            border-start-end-radius: var-get($_theme, 'week-number-border-radius');
        }
    }
}

@include themed-block(igx-day-label, fluent) {
    @include m('week-number') {
        span {
            color: var-get($_theme, 'week-number-foreground');
            background: var-get($_theme, 'week-number-background');

            &::before {
                content: '';
                position: absolute;
                background: var-get($_theme, 'week-number-background');
                border-inline: rem(1px) solid var-get($_theme, 'week-number-background');
                inset-inline-start: rem(-1px);
                inset-block-start: 100%;
                height: 100%;
                width: var-get($_theme, 'size');
            }
        }
    }
}
